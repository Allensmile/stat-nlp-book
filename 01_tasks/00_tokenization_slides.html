<!DOCTYPE html>
<!-- saved from url=(0079)http://localhost:9000/template/statnlpbookScrollReveal/01_tasks/00_tokenization -->
<html class="wf-ptsanscaption-n4-active wf-liberationsans-n4-active wf-active"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=120">
        <title>Tokenization</title>
        

<script src="../assets/javascripts/jquery-1.9.0.min.js" type="text/javascript"></script>
<link rel="stylesheet" media="screen" href="../assets/stylesheets/normalize.css">

<!-- Moro imports -->
<script src="../assets/javascripts/document.js" type="text/javascript"></script>
<script src="../assets/javascripts/moro.js" type="text/javascript"></script>
<script src="../assets/javascripts/moro-cellconfig.js" type="text/javascript"></script>
<script src="../assets/javascripts/editor.js" type="text/javascript"></script>
<script src="../assets/javascripts/moro-static.js" type="text/javascript"></script>

<link rel="stylesheet" media="screen" href="../assets/stylesheets/moro.css">
<link rel="stylesheet" media="screen" href="../assets/stylesheets/static.css">

<!-- ACE editor -->
<script src="../assets/javascripts/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="../assets/javascripts/ace/ext-language_tools.js" type="text/javascript" charset="utf-8"></script>

<!-- Bootstrap -->
<link href="../assets/javascripts/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
<script src="../assets/javascripts/bootstrap/js/bootstrap.js" type="text/javascript"></script>

<!-- Icons, etc.-->
<link href="../assets/stylesheets/font-awesome/css/font-awesome.min.css" rel="stylesheet">
<link href="../assets/stylesheets/octicons/octicons.css" rel="stylesheet">

<!-- MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({ TeX: { equationNumbers: {autoNumber: "AMS"} }, "HTML-CSS": { linebreaks: {automatic: true} } });
</script>
<script type="text/javascript" src="../assets/javascripts/MathJax.js"></script>
<!--script type="text/javascript" src="../assets/javascripts/MathJax-2.5-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script-->

<!-- Highlight.js -->
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.2/styles/tomorrow.min.css">
<script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.2/highlight.min.js"></script>

<!-- HTMLGEN -->
<script type="text/javascript" src="../assets/javascripts/d3.min.js"></script>
<script type="text/javascript" src="../assets/javascripts/raphael-min.js"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style>
<script type="text/javascript" src="../assets/javascripts/nv.d3.min.js"></script>
<script src="../assets/javascripts/htmlgen/d3utils.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" src="../assets/javascripts/brat/client/lib/head.load.min.js"></script>

<script type="text/javascript" src="../assets/javascripts/dagre-d3.js"></script>

<link href="../assets/stylesheets/nv.d3.css" rel="stylesheet">
<link rel="stylesheet" media="screen" href="../assets/stylesheets/htmlgen.css">

        

<link rel="icon" type="image/x-icon" href="../assets/images/wolfe-logo-black.png">

<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic,900">
<link rel="stylesheet" media="screen" href="../assets/stylesheets/gridism.css">
<link rel="stylesheet" media="screen" href="../assets/stylesheets/normalize.css">
<link rel="stylesheet" media="screen" href="../assets/stylesheets/wolfe.css">

        <link rel="stylesheet" media="screen" href="../assets/stylesheets/statnlpbook.css">
        <link rel="stylesheet" media="screen" href="../assets/stylesheets/statnlpbookScrollReveal.css">

    <script src="../assets/javascripts/ace/snippets/text.js"></script><script src="../assets/javascripts/ace/theme-chaos.js"></script><script src="../assets/javascripts/ace/mode-markdown.js"></script><style id="ace-chaos">.ace-chaos .ace_gutter {background: #141414;color: #595959;border-right: 1px solid #282828;}.ace-chaos .ace_gutter-cell.ace_warning {background-image: none;background: #FC0;border-left: none;padding-left: 0;color: #000;}.ace-chaos .ace_gutter-cell.ace_error {background-position: -6px center;background-image: none;background: #F10;border-left: none;padding-left: 0;color: #000;}.ace-chaos .ace_print-margin {border-left: 1px solid #555;right: 0;background: #1D1D1D;}.ace-chaos {background-color: #161616;color: #E6E1DC;}.ace-chaos .ace_cursor {border-left: 2px solid #FFFFFF;}.ace-chaos .ace_cursor.ace_overwrite {border-left: 0px;border-bottom: 1px solid #FFFFFF;}.ace-chaos .ace_marker-layer .ace_selection {background: #494836;}.ace-chaos .ace_marker-layer .ace_step {background: rgb(198, 219, 174);}.ace-chaos .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #FCE94F;}.ace-chaos .ace_marker-layer .ace_active-line {background: #333;}.ace-chaos .ace_gutter-active-line {background-color: #222;}.ace-chaos .ace_invisible {color: #404040;}.ace-chaos .ace_keyword {color:#00698F;}.ace-chaos .ace_keyword.ace_operator {color:#FF308F;}.ace-chaos .ace_constant {color:#1EDAFB;}.ace-chaos .ace_constant.ace_language {color:#FDC251;}.ace-chaos .ace_constant.ace_library {color:#8DFF0A;}.ace-chaos .ace_constant.ace_numeric {color:#58C554;}.ace-chaos .ace_invalid {color:#FFFFFF;background-color:#990000;}.ace-chaos .ace_invalid.ace_deprecated {color:#FFFFFF;background-color:#990000;}.ace-chaos .ace_support {color: #999;}.ace-chaos .ace_support.ace_function {color:#00AEEF;}.ace-chaos .ace_function {color:#00AEEF;}.ace-chaos .ace_string {color:#58C554;}.ace-chaos .ace_comment {color:#555;font-style:italic;padding-bottom: 0px;}.ace-chaos .ace_variable {color:#997744;}.ace-chaos .ace_meta.ace_tag {color:#BE53E6;}.ace-chaos .ace_entity.ace_other.ace_attribute-name {color:#FFFF89;}.ace-chaos .ace_markup.ace_underline {text-decoration: underline;}.ace-chaos .ace_fold-widget {text-align: center;}.ace-chaos .ace_fold-widget:hover {color: #777;}.ace-chaos .ace_fold-widget.ace_start,.ace-chaos .ace_fold-widget.ace_end,.ace-chaos .ace_fold-widget.ace_closed{background: none;border: none;box-shadow: none;}.ace-chaos .ace_fold-widget.ace_start:after {content: '▾'}.ace-chaos .ace_fold-widget.ace_end:after {content: '▴'}.ace-chaos .ace_fold-widget.ace_closed:after {content: '‣'}.ace-chaos .ace_indent-guide {border-right:1px dotted #333;margin-right:-1px;}.ace-chaos .ace_fold { background: #222; border-radius: 3px; color: #7AF; border: none; }.ace-chaos .ace_fold:hover {background: #CCC; color: #000;}</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><script src="../assets/javascripts/ace/snippets/markdown.js"></script><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax:focus, body :focus .MathJax {display: inline-table}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none}
.MathJax .MathJax_EmBox {display: block!important; overflow: hidden; width: 1px; height: 60em; min-height: 0; max-height: none}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Blank; src: url('about:blank')}
.MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>
    <body class="wrap" style="zoom: 1;"><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div>
        <header>
            <nav class="mobile-nav show-on-mobiles">
                    <!--{% include primary-nav-items.html %}-->
            </nav>
            <div class="grid">
                <div class="center-on-mobiles">
                    <h1>
                        <a href="../00_intro.html">
                            <h1 class="logo-text">StatNLP</h1>
                        </a>
                    </h1>
                    [<a id="toggle-view" href="../01_tasks/00_tokenization.html">Text</a>]
                </div>
            </div>
        </header>
        <section>
            <div class="grid">
                <div>
                
                    
                
                    
                
                    
                
                    
<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; /&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1" role="math" style="width: 0.002em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.002em; height: 0px; font-size: 115%;"><span style="position: absolute; clip: rect(3.867em 1000em 4.157em -999.998em); top: -4.007em; left: 0.002em;"><span class="mrow" id="MathJax-Span-2"></span><span style="display: inline-block; width: 0px; height: 4.012em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.114em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"></math></span></span><script type="math/tex" id="MathJax-Element-1">
  \def\prob{p}
  \def\vocab{V}
  \def\params{\boldsymbol{\theta}}
  \def\argmax{\mathop{\arg\,\max}}
  \def\param{\theta}
  \def\bpi{\boldsymbol{\pi}}
  \def\balpha{\boldsymbol{\alpha}}
  \def\bbeta{\boldsymbol{\beta}}
  \def\perplexity{PP}
  \def\x{\mathbf{x}}
  \def\y{\mathbf{y}}
  \def\Xs{\mathcal{X}}
  \def\Ys{\mathcal{Y}}
  \def\perplexity{PP}
  \def\train{\mathcal{D}_\mathit{train}}
  \def\counts#1#2{\#_{#1}(#2)}
  \def\RR{\bf R}
  \def\length#1{\mathop{length}(#1)}
  \def\aligns{\mathbf{a}}
  \def\align{a}
  \def\source{\mathbf{s}}
  \def\ssource{s}
  \def\target{\mathbf{t}}
  \def\starget{t}
</script>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                </div>
                <div id="static_content" class="unit center-on-mobiles">
                    <h1>Tokenization</h1>
                <div id="cell0" class="cellWrapper"><div id="editCell0" class="cell" hidden="true" style="display: none;"><div class="input"><div id="editor0" class="cell editor ace_editor ace-chaos ace_dark"><div style="position: absolute;"></div><textarea class="ace_text-input" wrap="off" autocapitalize="off" spellcheck="false" style="opacity: 0;"></textarea><div class="ace_gutter"><div class="ace_layer ace_gutter-layer ace_folding-enabled"></div><div class="ace_gutter-active-line"></div></div><div class="ace_scroller"><div class="ace_content"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 4px; visibility: hidden;"></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px;"><div class="ace_scrollbar-inner" style="width: 20px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px;"><div class="ace_scrollbar-inner" style="height: 20px;"></div></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div><a id="runCode0" role="button" class="runButton btn disabled" disabled="disabled" "=""><i class="fa fa-play-circle-o fa-2x"></i></a></div></div><div id="renderDisplay0" class="cell"><div class="newslide"></div><div class="slideStart" id="slide0"></div><p><span class="summary">We need to identify which units constitutes the <strong>words</strong> of a sentence.</span></p><p><span class="summary"></span></p>
<div class="newslide"></div><div class="slideStart" id="slide1"></div><p><span class="summary">In Scala we can use <code>string.split</code>:</span></p></div></div><div id="cell1" class="cellWrapper"><div id="editCell1" class="cell" hidden="true" style="display: block;"><div class="input"><div id="editor1" class="cell editor ace_editor ace-chaos ace_dark" style="height: 72px;"><div style="position: absolute;"></div><textarea class="ace_text-input" wrap="off" autocapitalize="off" spellcheck="false" style="opacity: 0; height: 26px; width: 11.4019px; left: 288.439px; top: 36px;"></textarea><div class="ace_gutter"><div class="ace_layer ace_gutter-layer ace_folding-enabled" style="margin-top: 10px; height: 124px; width: 45px;"><div class="ace_gutter-cell " style="height: 26px;">1</div><div class="ace_gutter-cell " style="height: 26px;">2</div></div><div class="ace_gutter-active-line" style="top: 36px; height: 26px;"></div></div><div class="ace_scroller" style="left: 45px; right: 0px; bottom: 0px;"><div class="ace_content" style="margin-top: 10px; width: 1051px; height: 124px; margin-left: 0px;"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 916.15px; visibility: hidden;"></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"><div class="ace_line_group" style="height:26px"><div class="ace_line" style="height:26px"><span class="ace_keyword">val</span>&nbsp;<span class="ace_identifier">text</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_string">"Mr.&nbsp;Bob&nbsp;Dobolina&nbsp;is&nbsp;thinkin'&nbsp;of&nbsp;a&nbsp;master&nbsp;plan.&nbsp;Why&nbsp;doesn't&nbsp;he&nbsp;quit?"</span></div></div><div class="ace_line_group" style="height:26px"><div class="ace_line" style="height:26px"><span class="ace_identifier">text</span>.<span class="ace_identifier">split</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">"&nbsp;"</span><span class="ace_paren ace_rparen">)</span>.<span class="ace_identifier">toSeq</span></div></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor" style="left: 243.439px; top: 26px; width: 11.4019px; height: 26px;"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px; bottom: 0px;"><div class="ace_scrollbar-inner" style="width: 20px; height: 72px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px; left: 45px; right: 0px;"><div class="ace_scrollbar-inner" style="height: 20px; width: 1051px;"></div></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div><a id="runCode1" role="button" class="runButton btn disabled" disabled="disabled" "=""><i class="fa fa-play-circle-o fa-2x"></i></a></div></div><div id="renderDisplay1" class="cell"><div class="string-result"><div class="asIterable WrappedArray"><span class="typeName">WrappedArray</span>
<ol start="0" class="fields">
  <li class="fieldValue"><span class="asString String">Mr.</span></li>
  <li class="fieldValue"><span class="asString String">Bob</span></li>
  <li class="fieldValue"><span class="asString String">Dobolina</span></li>
  <li class="fieldValue"><span class="asString String">is</span></li>
  <li class="fieldValue"><span class="asString String">thinkin'</span></li>
  <li class="fieldValue"><span class="asString String">of</span></li>
  <li class="fieldValue"><span class="asString String">a</span></li>
  <li class="fieldValue"><span class="asString String">master</span></li>
  <li class="fieldValue"><span class="asString String">plan.</span></li>
  <li class="fieldValue"><span class="asString String">Why</span></li>
  <li class="fieldValue"><span class="asString String">doesn't</span></li>
  <li class="fieldValue"><span class="asString String">he</span></li>
  <li class="fieldValue"><span class="asString String">quit?</span></li>
</ol>
</div></div></div></div><div id="cell2" class="cellWrapper"><div id="editCell2" class="cell" hidden="true" style="display: none;"><div class="input"><div id="editor2" class="cell editor ace_editor ace-chaos ace_dark"><div style="position: absolute;"></div><textarea class="ace_text-input" wrap="off" autocapitalize="off" spellcheck="false" style="opacity: 0;"></textarea><div class="ace_gutter"><div class="ace_layer ace_gutter-layer ace_folding-enabled"></div><div class="ace_gutter-active-line"></div></div><div class="ace_scroller"><div class="ace_content"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 4px; visibility: hidden;"></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px;"><div class="ace_scrollbar-inner" style="width: 20px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px;"><div class="ace_scrollbar-inner" style="height: 20px;"></div></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div><a id="runCode2" role="button" class="runButton btn disabled" disabled="disabled" "=""><i class="fa fa-play-circle-o fa-2x"></i></a></div></div><div id="renderDisplay2" class="cell"><div class="newslide"></div><div class="slideStart" id="slide2"></div><p><span class="summary">This isn't quite optimal. Before we fix it we move to Wolfe <a href="http://localhost:9000/assets/wolfe/wolfe-nlp/target/scala-2.11/api/index.html#ml.wolfe.nlp.Document">document data structures</a>.</span></p><p><span class="summary"></span></p>
<div class="newslide"></div><div class="slideStart" id="slide3"></div><p>Below <code>Document.fromString</code> creates a document where a single token spans the complete source string.</p></div></div><div id="cell3" class="cellWrapper"><div id="editCell3" class="cell" hidden="true" style="display: block;"><div class="input"><div id="editor3" class="cell editor ace_editor ace-chaos ace_dark" style="height: 72px;"><div style="position: absolute;"></div><textarea class="ace_text-input" wrap="off" autocapitalize="off" spellcheck="false" style="opacity: 0; height: 26px; width: 11.4019px; left: 242.832px; top: 36px;"></textarea><div class="ace_gutter"><div class="ace_layer ace_gutter-layer ace_folding-enabled" style="margin-top: 10px; height: 124px; width: 45px;"><div class="ace_gutter-cell " style="height: 26px;">1</div><div class="ace_gutter-cell " style="height: 26px;">2</div></div><div class="ace_gutter-active-line" style="top: 36px; height: 26px;"></div></div><div class="ace_scroller" style="left: 45px; right: 0px; bottom: 0px;"><div class="ace_content" style="margin-top: 10px; width: 1051px; height: 124px; margin-left: 0px;"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 916.15px; visibility: hidden;"></div></div><div class="ace_layer ace_marker-layer"><div class="ace_bracket ace_start" style="height:26px;width:11.401875px;top:26px;left:140.8225px;"></div></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"><div class="ace_line_group" style="height:26px"><div class="ace_line" style="height:26px"><span class="ace_keyword">val</span>&nbsp;<span class="ace_identifier">doc</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">Document</span>.<span class="ace_identifier">fromString</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">text</span><span class="ace_paren ace_rparen">)</span></div></div><div class="ace_line_group" style="height:26px"><div class="ace_line" style="height:26px"><span class="ace_identifier">renderTokens</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">doc</span><span class="ace_paren ace_rparen">)</span></div></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor" style="left: 197.832px; top: 26px; width: 11.4019px; height: 26px;"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px; bottom: 0px;"><div class="ace_scrollbar-inner" style="width: 20px; height: 72px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px; left: 45px; right: 0px;"><div class="ace_scrollbar-inner" style="height: 20px; width: 1051px;"></div></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div><a id="runCode3" role="button" class="runButton btn disabled" disabled="disabled" "=""><i class="fa fa-play-circle-o fa-2x"></i></a></div></div><div id="renderDisplay3" class="cell"><div class="string-result"><div id="brat609729494" class="hasSVG" style="display: block; height: 84.6px;"><svg version="1.1" viewBox="0 0 416.66666666666663 47" class="bratsvg" style="width: 750.6px; height: 84.6px;"><!-- document: undefined/undefined --><defs><filter id="Gaussian_Blur"><fegaussianblur in="SourceGraphic" stddeviation="2"></fegaussianblur></filter><marker id="drag_arrow" refX="5" refY="2.5" markerWidth="5" markerHeight="5" orient="auto" markerUnits="strokeWidth" class="drag_fill"><polyline points="0,0 5,2.5 0,5 0.2,2.5"></polyline></marker></defs><g class="background"><rect x="0" y="3.5" width="416.66666666666663" height="45" class="background0"></rect></g><g class="glow"></g><g class="highlight"><rect x="24" y="33" width="364.763671875" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect></g><g class="text"><text x="0" y="0"><tspan x="24" y="43" data-chunk-id="0" class="brat-text">Mr. Bob Dobolina is thinkin' of a master plan. Why doesn't he quit?</tspan></text></g><g transform="translate(0, 43)"><g></g><g transform="translate(24, 0)"><g></g><g class="span"><rect x="163.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T0" data-fragment-id="0"></rect><text x="182.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 182.5,-10.5 182.5,-14.5C182.5,-10.5 364.763671875,-14.5 364.763671875,-10.5" class="curly" stroke="gray"></path></g></g><g class="arcs"></g></g><g class="sentnum"><a href="#undefined?focus=sent~1"><text x="18" y="43" data-sent="1">1</text></a><path d="M20,0L20,47"></path></g></svg></div>

 <link rel="stylesheet" type="text/css" href="../assets/javascripts/brat/style-vis.css">
 <link rel="stylesheet" type="text/css" href="../assets/stylesheets/wolfe-brat.css">


<script type="text/javascript">
        var bratLocation;

             console.log("embedBrat");
             if (typeof bratLocation === 'undefined') {
                bratLocation = "../assets/javascripts/brat";
                head.js(
                    // External libraries
                    bratLocation + '/client/lib/jquery.min.js',
                    bratLocation + '/client/lib/jquery.svg.min.js',
                    bratLocation + '/client/lib/jquery.svgdom.min.js',

                    // brat helper modules
                    bratLocation + '/client/src/configuration.js',
                    bratLocation + '/client/src/util.js',
                    bratLocation + '/client/src/annotation_log.js',
                    bratLocation + '/client/lib/webfont.js',

                    // brat modules
                    bratLocation + '/client/src/dispatcher.js',
                    bratLocation + '/client/src/url_monitor.js',
                    bratLocation + '/client/src/visualizer.js'
                 );
                 console.log("head.js called");
             }

             head.ready(function() {
                console.log("Head is ready");
                console.log("Huh?");

                var collData =
{
}
      ;

                var docData =
{
    // Our text of choice
    text     : "Mr. Bob Dobolina is thinkin' of a master plan. Why doesn't he quit?",
    // The entities entry holds all entity annotations
    entities : [
        /* Format: [{ID}, {TYPE}, [[{START}, {END}]]]
            note that range of the offsets are [{START},{END}) */
        ['T0','Token',[[0,67]]]
    ],
    sentence_offsets: [[0,67]],
    token_offsets: [[0,67]],
    relations: []

}
      ;
                var currentWidth = jQuery('#brat609729494').width();
                console.log(jQuery('#brat609729494').width());

                var dispatcher = Util.embedWithForceWidth(
                    // id of the div element where brat should embed the visualisations
                    'brat609729494',
                    // object containing collection data
                    collData,
                    // object containing document data
                    docData,
                    // Array containing locations of the visualisation fonts

[
    '../assets/javascripts/brat' + '/static/fonts/PT_Sans-Caption-Web-Regular.ttf',
    '../assets/javascripts/brat' + '/static/fonts/Liberation_Sans-Regular.ttf'
]
      ,
                    //forceWidth
                    typeof bratSVGScale !== 'undefined' ? currentWidth / bratSVGScale : currentWidth
                    );
                console.log("Dispatcher:");
                console.log(dispatcher);
                dispatcher.on('doneRendering', function() {
                    console.log("Done Rendering!");
                    var scale = typeof bratSVGScale !== 'undefined' ? bratSVGScale : 1;
                    var div = jQuery('#brat609729494');
                    var svg = jQuery('svg',div);
                    var newHeight = scale * svg.height();
                    var newWidth = scale * svg.width();
                    svg.height(newHeight).width(newWidth);
                    div.height(newHeight);
                });
            });



    </script></div></div></div><div id="cell4" class="cellWrapper"><div id="editCell4" class="cell" hidden="true" style="display: none;"><div class="input"><div id="editor4" class="cell editor ace_editor ace-chaos ace_dark"><div style="position: absolute;"></div><textarea class="ace_text-input" wrap="off" autocapitalize="off" spellcheck="false" style="opacity: 0;"></textarea><div class="ace_gutter"><div class="ace_layer ace_gutter-layer ace_folding-enabled"></div><div class="ace_gutter-active-line"></div></div><div class="ace_scroller"><div class="ace_content"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 4px; visibility: hidden;"></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px;"><div class="ace_scrollbar-inner" style="width: 20px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px;"><div class="ace_scrollbar-inner" style="height: 20px;"></div></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div><a id="runCode4" role="button" class="runButton btn disabled" disabled="disabled" "=""><i class="fa fa-play-circle-o fa-2x"></i></a></div></div><div id="renderDisplay4" class="cell"><div class="newslide"></div><div class="slideStart" id="slide4"></div><h3>Tokenization with Regular Expressions</h3><p><span class="summary">We can use regular expressions to define where to split tokens.</span></p></div></div><div id="cell5" class="cellWrapper"><div id="editCell5" class="cell" hidden="true" style="display: block;"><div class="input"><div id="editor5" class="cell editor ace_editor ace-chaos ace_dark" style="height: 98px;"><div style="position: absolute;"></div><textarea class="ace_text-input" wrap="off" autocapitalize="off" spellcheck="false" style="opacity: 0; height: 26px; width: 11.4019px; left: 311.243px; top: 62px;"></textarea><div class="ace_gutter"><div class="ace_layer ace_gutter-layer ace_folding-enabled" style="margin-top: 10px; height: 150px; width: 45px;"><div class="ace_gutter-cell " style="height: 26px;">1</div><div class="ace_gutter-cell " style="height: 26px;">2</div><div class="ace_gutter-cell " style="height: 26px;">3</div></div><div class="ace_gutter-active-line" style="top: 62px; height: 26px;"></div></div><div class="ace_scroller" style="left: 45px; right: 0px; bottom: 0px;"><div class="ace_content" style="margin-top: 10px; width: 1051px; height: 150px; margin-left: 0px;"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 916.15px; visibility: hidden;"></div></div><div class="ace_layer ace_marker-layer"><div class="ace_bracket ace_start" style="height:26px;width:11.401875px;top:52px;left:140.8225px;"></div></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"><div class="ace_line_group" style="height:26px"><div class="ace_line" style="height:26px"><span class="ace_keyword">val</span>&nbsp;<span class="ace_identifier">tokenizer</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">Tokenizer</span>.<span class="ace_identifier">fromRegEx</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">"</span>\\<span class="ace_string">s"</span><span class="ace_paren ace_rparen">)</span></div></div><div class="ace_line_group" style="height:26px"><div class="ace_line" style="height:26px"><span class="ace_keyword">val</span>&nbsp;<span class="ace_identifier">tokenized</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">tokenizer</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">doc</span><span class="ace_paren ace_rparen">)</span></div></div><div class="ace_line_group" style="height:26px"><div class="ace_line" style="height:26px"><span class="ace_identifier">renderTokens</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">tokenized</span><span class="ace_paren ace_rparen">)</span></div></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor" style="left: 266.243px; top: 52px; width: 11.4019px; height: 26px;"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px; bottom: 0px;"><div class="ace_scrollbar-inner" style="width: 20px; height: 98px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px; left: 45px; right: 0px;"><div class="ace_scrollbar-inner" style="height: 20px; width: 1051px;"></div></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div><a id="runCode5" role="button" class="runButton btn disabled" disabled="disabled" "=""><i class="fa fa-play-circle-o fa-2x"></i></a></div></div><div id="renderDisplay5" class="cell"><div class="string-result"><div id="brat985434904" class="hasSVG" style="display: block; height: 165.6px;"><svg version="1.1" viewBox="0 0 416.66666666666663 92" class="bratsvg" style="width: 750.6px; height: 165.6px;"><!-- document: undefined/undefined --><defs><filter id="Gaussian_Blur"><fegaussianblur in="SourceGraphic" stddeviation="2"></fegaussianblur></filter><marker id="drag_arrow" refX="5" refY="2.5" markerWidth="5" markerHeight="5" orient="auto" markerUnits="strokeWidth" class="drag_fill"><polyline points="0,0 5,2.5 0,5 0.2,2.5"></polyline></marker></defs><g class="background"><rect x="0" y="3.5" width="416.66666666666663" height="45" class="background0"></rect><rect x="0" y="48.5" width="416.66666666666663" height="45" class="background0"></rect></g><g class="glow"></g><g class="highlight"><rect x="33.5" y="33" width="17.326171875" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="72.8515625" y="33" width="21.3515625" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="106.703125" y="33" width="47.3671875" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="171.5703125" y="33" width="8.666015625" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="199.421875" y="33" width="36.978515625" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="253.7734375" y="33" width="10.0078125" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="297.125" y="33" width="6.673828125" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="323.9765625" y="33" width="36.673828125" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="370.328125" y="33" width="26.021484375" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="29.5" y="78" width="24" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="65.3515625" y="78" width="38.3203125" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="119.171875" y="78" width="13.34765625" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="153.5234375" y="78" width="26.021484375" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect></g><g class="text"><text x="0" y="0"><tspan x="33.5" y="43" data-chunk-id="0" class="brat-text">Mr. </tspan><tspan x="72.8515625" y="43" data-chunk-id="1" class="brat-text">Bob </tspan><tspan x="106.703125" y="43" data-chunk-id="2" class="brat-text">Dobolina </tspan><tspan x="171.5703125" y="43" data-chunk-id="3" class="brat-text">is </tspan><tspan x="199.421875" y="43" data-chunk-id="4" class="brat-text">thinkin' </tspan><tspan x="253.7734375" y="43" data-chunk-id="5" class="brat-text">of </tspan><tspan x="297.125" y="43" data-chunk-id="6" class="brat-text">a </tspan><tspan x="323.9765625" y="43" data-chunk-id="7" class="brat-text">master </tspan><tspan x="370.328125" y="43" data-chunk-id="8" class="brat-text">plan. </tspan><tspan x="29.5" y="88" data-chunk-id="9" class="brat-text">Why </tspan><tspan x="65.3515625" y="88" data-chunk-id="10" class="brat-text">doesn't </tspan><tspan x="119.171875" y="88" data-chunk-id="11" class="brat-text">he </tspan><tspan x="153.5234375" y="88" data-chunk-id="12" class="brat-text">quit?</tspan></text></g><g transform="translate(0, 43)"><g></g><g transform="translate(33.5, 0)"><g></g><g class="span"><rect x="-9.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T0" data-fragment-id="0"></rect><text x="8.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 8.5,-10.5 8.5,-14.5C8.5,-10.5 17.326171875,-14.5 17.326171875,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(72.8515625, 0)"><g></g><g class="span"><rect x="-7.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T1" data-fragment-id="0"></rect><text x="10.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 10.5,-10.5 10.5,-14.5C10.5,-10.5 21.3515625,-14.5 21.3515625,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(106.703125, 0)"><g></g><g class="span"><rect x="5.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T2" data-fragment-id="0"></rect><text x="23.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 23.5,-10.5 23.5,-14.5C23.5,-10.5 47.3671875,-14.5 47.3671875,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(171.5703125, 0)"><g></g><g class="span"><rect x="-13.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T3" data-fragment-id="0"></rect><text x="4.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 4.5,-10.5 4.5,-14.5C4.5,-10.5 8.666015625,-14.5 8.666015625,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(199.421875, 0)"><g></g><g class="span"><rect x="0.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T4" data-fragment-id="0"></rect><text x="18.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 18.5,-10.5 18.5,-14.5C18.5,-10.5 36.978515625,-14.5 36.978515625,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(253.7734375, 0)"><g></g><g class="span"><rect x="-12.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T5" data-fragment-id="0"></rect><text x="5.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 5.5,-10.5 5.5,-14.5C5.5,-10.5 10.0078125,-14.5 10.0078125,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(297.125, 0)"><g></g><g class="span"><rect x="-14.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T6" data-fragment-id="0"></rect><text x="3.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 3.5,-10.5 3.5,-14.5C3.5,-10.5 6.673828125,-14.5 6.673828125,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(323.9765625, 0)"><g></g><g class="span"><rect x="0.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T7" data-fragment-id="0"></rect><text x="18.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 18.5,-10.5 18.5,-14.5C18.5,-10.5 36.673828125,-14.5 36.673828125,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(370.328125, 0)"><g></g><g class="span"><rect x="-4.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T8" data-fragment-id="0"></rect><text x="13.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 13.5,-10.5 13.5,-14.5C13.5,-10.5 26.021484375,-14.5 26.021484375,-10.5" class="curly" stroke="gray"></path></g></g><g class="arcs"></g></g><g transform="translate(0, 88)"><g></g><g transform="translate(29.5, 0)"><g></g><g class="span"><rect x="-5.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T9" data-fragment-id="0"></rect><text x="12.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 12.5,-10.5 12.5,-14.5C12.5,-10.5 24,-14.5 24,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(65.3515625, 0)"><g></g><g class="span"><rect x="0.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T10" data-fragment-id="0"></rect><text x="19.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 19.5,-10.5 19.5,-14.5C19.5,-10.5 38.3203125,-14.5 38.3203125,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(119.171875, 0)"><g></g><g class="span"><rect x="-11.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T11" data-fragment-id="0"></rect><text x="6.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 6.5,-10.5 6.5,-14.5C6.5,-10.5 13.34765625,-14.5 13.34765625,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(153.5234375, 0)"><g></g><g class="span"><rect x="-4.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T12" data-fragment-id="0"></rect><text x="13.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 13.5,-10.5 13.5,-14.5C13.5,-10.5 26.021484375,-14.5 26.021484375,-10.5" class="curly" stroke="gray"></path></g></g><g class="arcs"></g></g><g class="sentnum"><a href="#undefined?focus=sent~1"><text x="18" y="43" data-sent="1">1</text></a><path d="M20,0L20,92"></path></g></svg></div>

 <link rel="stylesheet" type="text/css" href="../assets/javascripts/brat/style-vis.css">
 <link rel="stylesheet" type="text/css" href="../assets/stylesheets/wolfe-brat.css">


<script type="text/javascript">
        var bratLocation;

             console.log("embedBrat");
             if (typeof bratLocation === 'undefined') {
                bratLocation = "../assets/javascripts/brat";
                head.js(
                    // External libraries
                    bratLocation + '/client/lib/jquery.min.js',
                    bratLocation + '/client/lib/jquery.svg.min.js',
                    bratLocation + '/client/lib/jquery.svgdom.min.js',

                    // brat helper modules
                    bratLocation + '/client/src/configuration.js',
                    bratLocation + '/client/src/util.js',
                    bratLocation + '/client/src/annotation_log.js',
                    bratLocation + '/client/lib/webfont.js',

                    // brat modules
                    bratLocation + '/client/src/dispatcher.js',
                    bratLocation + '/client/src/url_monitor.js',
                    bratLocation + '/client/src/visualizer.js'
                 );
                 console.log("head.js called");
             }

             head.ready(function() {
                console.log("Head is ready");
                console.log("Huh?");

                var collData =
{
}
      ;

                var docData =
{
    // Our text of choice
    text     : "Mr. Bob Dobolina is thinkin' of a master plan. Why doesn't he quit?",
    // The entities entry holds all entity annotations
    entities : [
        /* Format: [{ID}, {TYPE}, [[{START}, {END}]]]
            note that range of the offsets are [{START},{END}) */
        ['T0','Token',[[0,3]]],
['T1','Token',[[4,7]]],
['T2','Token',[[8,16]]],
['T3','Token',[[17,19]]],
['T4','Token',[[20,28]]],
['T5','Token',[[29,31]]],
['T6','Token',[[32,33]]],
['T7','Token',[[34,40]]],
['T8','Token',[[41,46]]],
['T9','Token',[[47,50]]],
['T10','Token',[[51,58]]],
['T11','Token',[[59,61]]],
['T12','Token',[[62,67]]]
    ],
    sentence_offsets: [[0,67]],
    token_offsets: [[0,3],[4,7],[8,16],[17,19],[20,28],[29,31],[32,33],[34,40],[41,46],[47,50],[51,58],[59,61],[62,67]],
    relations: []

}
      ;
                var currentWidth = jQuery('#brat985434904').width();
                console.log(jQuery('#brat985434904').width());

                var dispatcher = Util.embedWithForceWidth(
                    // id of the div element where brat should embed the visualisations
                    'brat985434904',
                    // object containing collection data
                    collData,
                    // object containing document data
                    docData,
                    // Array containing locations of the visualisation fonts

[
    '../assets/javascripts/brat' + '/static/fonts/PT_Sans-Caption-Web-Regular.ttf',
    '../assets/javascripts/brat' + '/static/fonts/Liberation_Sans-Regular.ttf'
]
      ,
                    //forceWidth
                    typeof bratSVGScale !== 'undefined' ? currentWidth / bratSVGScale : currentWidth
                    );
                console.log("Dispatcher:");
                console.log(dispatcher);
                dispatcher.on('doneRendering', function() {
                    console.log("Done Rendering!");
                    var scale = typeof bratSVGScale !== 'undefined' ? bratSVGScale : 1;
                    var div = jQuery('#brat985434904');
                    var svg = jQuery('svg',div);
                    var newHeight = scale * svg.height();
                    var newWidth = scale * svg.width();
                    svg.height(newHeight).width(newWidth);
                    div.height(newHeight);
                });
            });



    </script></div></div></div><div id="cell6" class="cellWrapper"><div id="editCell6" class="cell" hidden="true" style="display: none;"><div class="input"><div id="editor6" class="cell editor ace_editor ace-chaos ace_dark"><div style="position: absolute;"></div><textarea class="ace_text-input" wrap="off" autocapitalize="off" spellcheck="false" style="opacity: 0;"></textarea><div class="ace_gutter"><div class="ace_layer ace_gutter-layer ace_folding-enabled"></div><div class="ace_gutter-active-line"></div></div><div class="ace_scroller"><div class="ace_content"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 4px; visibility: hidden;"></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px;"><div class="ace_scrollbar-inner" style="width: 20px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px;"><div class="ace_scrollbar-inner" style="height: 20px;"></div></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div><a id="runCode6" role="button" class="runButton btn disabled" disabled="disabled" "=""><i class="fa fa-play-circle-o fa-2x"></i></a></div></div><div id="renderDisplay6" class="cell"><div class="newslide"></div><div class="slideStart" id="slide5"></div><p><span class="summary">Use <strong>lookahead</strong> to split at zero-length tokens.</span></p></div></div><div id="cell7" class="cellWrapper"><div id="editCell7" class="cell" hidden="true" style="display: block;"><div class="input"><div id="editor7" class="cell editor ace_editor ace-chaos ace_dark" style="height: 176px;"><div style="position: absolute;"></div><textarea class="ace_text-input" wrap="off" autocapitalize="off" spellcheck="false" style="opacity: 0; height: 26px; width: 11.4019px; left: 311.243px; top: 140px;"></textarea><div class="ace_gutter"><div class="ace_layer ace_gutter-layer ace_folding-enabled" style="margin-top: 10px; height: 228px; width: 45px;"><div class="ace_gutter-cell " style="height: 26px;">1</div><div class="ace_gutter-cell " style="height: 26px;">2</div><div class="ace_gutter-cell " style="height: 26px;">3</div><div class="ace_gutter-cell " style="height: 26px;">4</div><div class="ace_gutter-cell " style="height: 26px;">5</div><div class="ace_gutter-cell " style="height: 26px;">6</div></div><div class="ace_gutter-active-line" style="top: 140px; height: 26px;"></div></div><div class="ace_scroller" style="left: 45px; right: 0px; bottom: 0px;"><div class="ace_content" style="margin-top: 10px; width: 1051px; height: 228px; margin-left: 0px;"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 916.15px; visibility: hidden;"></div></div><div class="ace_layer ace_marker-layer"><div class="ace_bracket ace_start" style="height:26px;width:11.401875px;top:130px;left:140.8225px;"></div></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"><div class="ace_line_group" style="height:26px"><div class="ace_line" style="height:26px"><span class="ace_keyword">val</span>&nbsp;<span class="ace_identifier">punct</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_string">"[</span>\\<span class="ace_string">.</span>\\<span class="ace_string">?]"</span></div></div><div class="ace_line_group" style="height:26px"><div class="ace_line" style="height:26px"><span class="ace_keyword">val</span>&nbsp;<span class="ace_identifier">beforePunct</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">s</span><span class="ace_string">"(?=$punct)"</span></div></div><div class="ace_line_group" style="height:26px"><div class="ace_line" style="height:26px"><span class="ace_keyword">val</span>&nbsp;<span class="ace_identifier">afterPunct</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">s</span><span class="ace_string">"(?&lt;=$punct)(?!</span>\\<span class="ace_string">s)"</span>&nbsp;<span class="ace_comment">//but&nbsp;not&nbsp;if&nbsp;whitespace&nbsp;follows</span></div></div><div class="ace_line_group" style="height:26px"><div class="ace_line" style="height:26px"><span class="ace_keyword">val</span>&nbsp;<span class="ace_identifier">tokenizer</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">Tokenizer</span>.<span class="ace_identifier">fromRegEx</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">s</span><span class="ace_string">"(</span>\\<span class="ace_string">s|$beforePunct|$afterPunct)"</span><span class="ace_paren ace_rparen">)</span></div></div><div class="ace_line_group" style="height:26px"><div class="ace_line" style="height:26px"><span class="ace_keyword">val</span>&nbsp;<span class="ace_identifier">tokenized</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">tokenizer</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">doc</span><span class="ace_paren ace_rparen">)</span></div></div><div class="ace_line_group" style="height:26px"><div class="ace_line" style="height:26px"><span class="ace_identifier">renderTokens</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">tokenized</span><span class="ace_paren ace_rparen">)</span></div></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor" style="left: 266.243px; top: 130px; width: 11.4019px; height: 26px;"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px; bottom: 0px;"><div class="ace_scrollbar-inner" style="width: 20px; height: 176px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px; left: 45px; right: 0px;"><div class="ace_scrollbar-inner" style="height: 20px; width: 1051px;"></div></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div><a id="runCode7" role="button" class="runButton btn disabled" disabled="disabled" "=""><i class="fa fa-play-circle-o fa-2x"></i></a></div></div><div id="renderDisplay7" class="cell"><div class="string-result"><div id="brat1474173316" class="hasSVG" style="display: block; height: 165.6px;"><svg version="1.1" viewBox="0 0 416.66666666666663 92" class="bratsvg" style="width: 750.6px; height: 165.6px;"><!-- document: undefined/undefined --><defs><filter id="Gaussian_Blur"><fegaussianblur in="SourceGraphic" stddeviation="2"></fegaussianblur></filter><marker id="drag_arrow" refX="5" refY="2.5" markerWidth="5" markerHeight="5" orient="auto" markerUnits="strokeWidth" class="drag_fill"><polyline points="0,0 5,2.5 0,5 0.2,2.5"></polyline></marker></defs><g class="background"><rect x="0" y="3.5" width="416.66666666666663" height="45" class="background0"></rect><rect x="0" y="48.5" width="416.66666666666663" height="45" class="background0"></rect></g><g class="glow"></g><g class="highlight"><rect x="34.5" y="33" width="13.9921875" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="77.8515625" y="33" width="3.333984375" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="110.203125" y="33" width="21.3515625" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="144.0546875" y="33" width="47.3671875" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="208.921875" y="33" width="8.666015625" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="236.7734375" y="33" width="36.978515625" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="291.125" y="33" width="10.0078125" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="334.4765625" y="33" width="6.673828125" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="361.328125" y="33" width="36.673828125" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="30.5" y="78" width="22.6875" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="77.8515625" y="78" width="3.333984375" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="108.203125" y="78" width="24" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="144.0546875" y="78" width="38.3203125" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="197.875" y="78" width="13.34765625" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="236.2265625" y="78" width="19.34765625" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="279.578125" y="78" width="6.673828125" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect></g><g class="text"><text x="0" y="0"><tspan x="34.5" y="43" data-chunk-id="0" class="brat-text">Mr</tspan><tspan x="77.8515625" y="43" data-chunk-id="1" class="brat-text">. </tspan><tspan x="110.203125" y="43" data-chunk-id="2" class="brat-text">Bob </tspan><tspan x="144.0546875" y="43" data-chunk-id="3" class="brat-text">Dobolina </tspan><tspan x="208.921875" y="43" data-chunk-id="4" class="brat-text">is </tspan><tspan x="236.7734375" y="43" data-chunk-id="5" class="brat-text">thinkin' </tspan><tspan x="291.125" y="43" data-chunk-id="6" class="brat-text">of </tspan><tspan x="334.4765625" y="43" data-chunk-id="7" class="brat-text">a </tspan><tspan x="361.328125" y="43" data-chunk-id="8" class="brat-text">master </tspan><tspan x="30.5" y="88" data-chunk-id="9" class="brat-text">plan</tspan><tspan x="77.8515625" y="88" data-chunk-id="10" class="brat-text">. </tspan><tspan x="108.203125" y="88" data-chunk-id="11" class="brat-text">Why </tspan><tspan x="144.0546875" y="88" data-chunk-id="12" class="brat-text">doesn't </tspan><tspan x="197.875" y="88" data-chunk-id="13" class="brat-text">he </tspan><tspan x="236.2265625" y="88" data-chunk-id="14" class="brat-text">quit</tspan><tspan x="279.578125" y="88" data-chunk-id="15" class="brat-text">?</tspan></text></g><g transform="translate(0, 43)"><g></g><g transform="translate(34.5, 0)"><g></g><g class="span"><rect x="-10.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T0" data-fragment-id="0"></rect><text x="6.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 6.5,-10.5 6.5,-14.5C6.5,-10.5 13.9921875,-14.5 13.9921875,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(77.8515625, 0)"><g></g><g class="span"><rect x="-16.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T1" data-fragment-id="0"></rect><text x="1.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 1.5,-10.5 1.5,-14.5C1.5,-10.5 3.333984375,-14.5 3.333984375,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(110.203125, 0)"><g></g><g class="span"><rect x="-7.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T2" data-fragment-id="0"></rect><text x="10.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 10.5,-10.5 10.5,-14.5C10.5,-10.5 21.3515625,-14.5 21.3515625,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(144.0546875, 0)"><g></g><g class="span"><rect x="5.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T3" data-fragment-id="0"></rect><text x="23.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 23.5,-10.5 23.5,-14.5C23.5,-10.5 47.3671875,-14.5 47.3671875,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(208.921875, 0)"><g></g><g class="span"><rect x="-13.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T4" data-fragment-id="0"></rect><text x="4.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 4.5,-10.5 4.5,-14.5C4.5,-10.5 8.666015625,-14.5 8.666015625,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(236.7734375, 0)"><g></g><g class="span"><rect x="0.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T5" data-fragment-id="0"></rect><text x="18.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 18.5,-10.5 18.5,-14.5C18.5,-10.5 36.978515625,-14.5 36.978515625,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(291.125, 0)"><g></g><g class="span"><rect x="-12.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T6" data-fragment-id="0"></rect><text x="5.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 5.5,-10.5 5.5,-14.5C5.5,-10.5 10.0078125,-14.5 10.0078125,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(334.4765625, 0)"><g></g><g class="span"><rect x="-14.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T7" data-fragment-id="0"></rect><text x="3.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 3.5,-10.5 3.5,-14.5C3.5,-10.5 6.673828125,-14.5 6.673828125,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(361.328125, 0)"><g></g><g class="span"><rect x="0.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T8" data-fragment-id="0"></rect><text x="18.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 18.5,-10.5 18.5,-14.5C18.5,-10.5 36.673828125,-14.5 36.673828125,-10.5" class="curly" stroke="gray"></path></g></g><g class="arcs"></g></g><g transform="translate(0, 88)"><g></g><g transform="translate(30.5, 0)"><g></g><g class="span"><rect x="-6.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T9" data-fragment-id="0"></rect><text x="11.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 11.5,-10.5 11.5,-14.5C11.5,-10.5 22.6875,-14.5 22.6875,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(77.8515625, 0)"><g></g><g class="span"><rect x="-16.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T10" data-fragment-id="0"></rect><text x="1.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 1.5,-10.5 1.5,-14.5C1.5,-10.5 3.333984375,-14.5 3.333984375,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(108.203125, 0)"><g></g><g class="span"><rect x="-5.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T11" data-fragment-id="0"></rect><text x="12.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 12.5,-10.5 12.5,-14.5C12.5,-10.5 24,-14.5 24,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(144.0546875, 0)"><g></g><g class="span"><rect x="0.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T12" data-fragment-id="0"></rect><text x="19.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 19.5,-10.5 19.5,-14.5C19.5,-10.5 38.3203125,-14.5 38.3203125,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(197.875, 0)"><g></g><g class="span"><rect x="-11.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T13" data-fragment-id="0"></rect><text x="6.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 6.5,-10.5 6.5,-14.5C6.5,-10.5 13.34765625,-14.5 13.34765625,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(236.2265625, 0)"><g></g><g class="span"><rect x="-8.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T14" data-fragment-id="0"></rect><text x="9.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 9.5,-10.5 9.5,-14.5C9.5,-10.5 19.34765625,-14.5 19.34765625,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(279.578125, 0)"><g></g><g class="span"><rect x="-14.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T15" data-fragment-id="0"></rect><text x="3.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 3.5,-10.5 3.5,-14.5C3.5,-10.5 6.673828125,-14.5 6.673828125,-10.5" class="curly" stroke="gray"></path></g></g><g class="arcs"></g></g><g class="sentnum"><a href="#undefined?focus=sent~1"><text x="18" y="43" data-sent="1">1</text></a><path d="M20,0L20,92"></path></g></svg></div>

 <link rel="stylesheet" type="text/css" href="../assets/javascripts/brat/style-vis.css">
 <link rel="stylesheet" type="text/css" href="../assets/stylesheets/wolfe-brat.css">


<script type="text/javascript">
        var bratLocation;

             console.log("embedBrat");
             if (typeof bratLocation === 'undefined') {
                bratLocation = "../assets/javascripts/brat";
                head.js(
                    // External libraries
                    bratLocation + '/client/lib/jquery.min.js',
                    bratLocation + '/client/lib/jquery.svg.min.js',
                    bratLocation + '/client/lib/jquery.svgdom.min.js',

                    // brat helper modules
                    bratLocation + '/client/src/configuration.js',
                    bratLocation + '/client/src/util.js',
                    bratLocation + '/client/src/annotation_log.js',
                    bratLocation + '/client/lib/webfont.js',

                    // brat modules
                    bratLocation + '/client/src/dispatcher.js',
                    bratLocation + '/client/src/url_monitor.js',
                    bratLocation + '/client/src/visualizer.js'
                 );
                 console.log("head.js called");
             }

             head.ready(function() {
                console.log("Head is ready");
                console.log("Huh?");

                var collData =
{
}
      ;

                var docData =
{
    // Our text of choice
    text     : "Mr. Bob Dobolina is thinkin' of a master plan. Why doesn't he quit?",
    // The entities entry holds all entity annotations
    entities : [
        /* Format: [{ID}, {TYPE}, [[{START}, {END}]]]
            note that range of the offsets are [{START},{END}) */
        ['T0','Token',[[0,2]]],
['T1','Token',[[2,3]]],
['T2','Token',[[4,7]]],
['T3','Token',[[8,16]]],
['T4','Token',[[17,19]]],
['T5','Token',[[20,28]]],
['T6','Token',[[29,31]]],
['T7','Token',[[32,33]]],
['T8','Token',[[34,40]]],
['T9','Token',[[41,45]]],
['T10','Token',[[45,46]]],
['T11','Token',[[47,50]]],
['T12','Token',[[51,58]]],
['T13','Token',[[59,61]]],
['T14','Token',[[62,66]]],
['T15','Token',[[66,67]]]
    ],
    sentence_offsets: [[0,67]],
    token_offsets: [[0,2],[2,3],[4,7],[8,16],[17,19],[20,28],[29,31],[32,33],[34,40],[41,45],[45,46],[47,50],[51,58],[59,61],[62,66],[66,67]],
    relations: []

}
      ;
                var currentWidth = jQuery('#brat1474173316').width();
                console.log(jQuery('#brat1474173316').width());

                var dispatcher = Util.embedWithForceWidth(
                    // id of the div element where brat should embed the visualisations
                    'brat1474173316',
                    // object containing collection data
                    collData,
                    // object containing document data
                    docData,
                    // Array containing locations of the visualisation fonts

[
    '../assets/javascripts/brat' + '/static/fonts/PT_Sans-Caption-Web-Regular.ttf',
    '../assets/javascripts/brat' + '/static/fonts/Liberation_Sans-Regular.ttf'
]
      ,
                    //forceWidth
                    typeof bratSVGScale !== 'undefined' ? currentWidth / bratSVGScale : currentWidth
                    );
                console.log("Dispatcher:");
                console.log(dispatcher);
                dispatcher.on('doneRendering', function() {
                    console.log("Done Rendering!");
                    var scale = typeof bratSVGScale !== 'undefined' ? bratSVGScale : 1;
                    var div = jQuery('#brat1474173316');
                    var svg = jQuery('svg',div);
                    var newHeight = scale * svg.height();
                    var newWidth = scale * svg.width();
                    svg.height(newHeight).width(newWidth);
                    div.height(newHeight);
                });
            });



    </script></div></div></div><div id="cell8" class="cellWrapper"><div id="editCell8" class="cell" hidden="true" style="display: none;"><div class="input"><div id="editor8" class="cell editor ace_editor ace-chaos ace_dark"><div style="position: absolute;"></div><textarea class="ace_text-input" wrap="off" autocapitalize="off" spellcheck="false" style="opacity: 0;"></textarea><div class="ace_gutter"><div class="ace_layer ace_gutter-layer ace_folding-enabled"></div><div class="ace_gutter-active-line"></div></div><div class="ace_scroller"><div class="ace_content"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 4px; visibility: hidden;"></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px;"><div class="ace_scrollbar-inner" style="width: 20px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px;"><div class="ace_scrollbar-inner" style="height: 20px;"></div></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div><a id="runCode8" role="button" class="runButton btn disabled" disabled="disabled" "=""><i class="fa fa-play-circle-o fa-2x"></i></a></div></div><div id="renderDisplay8" class="cell"><div class="newslide"></div><div class="slideStart" id="slide6"></div><p><span class="summary">This is still not perfect due to abbreviations such as "Mr." and the representation of <strong>contractions</strong>.</span></p>
<div class="exercise">
  <div class="exname">Exercise</div>    
  <div class="extext">Improve the regular expressions to overcome the two problems above.</div>    
</div></div></div><div id="cell9" class="cellWrapper"><div id="editCell9" class="cell" hidden="true" style="display: none;"><div class="input"><div id="editor9" class="cell editor ace_editor ace-chaos ace_dark"><div style="position: absolute;"></div><textarea class="ace_text-input" wrap="off" autocapitalize="off" spellcheck="false" style="opacity: 0;"></textarea><div class="ace_gutter"><div class="ace_layer ace_gutter-layer ace_folding-enabled"></div><div class="ace_gutter-active-line"></div></div><div class="ace_scroller"><div class="ace_content"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 4px; visibility: hidden;"></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px;"><div class="ace_scrollbar-inner" style="width: 20px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px;"><div class="ace_scrollbar-inner" style="height: 20px;"></div></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div><a id="runCode9" role="button" class="runButton btn disabled" disabled="disabled" "=""><i class="fa fa-play-circle-o fa-2x"></i></a></div></div><div id="renderDisplay9" class="cell"><div class="newslide"></div><div class="slideStart" id="slide7"></div><h3>Learning To Tokenize</h3><p><span class="summary">Tokenization is relatively easy for English, but not for other languages or domains.</span></p><p><span class="summary">We can <strong>learn</strong> to tokenize using sequence labelling models we discuss later.</span></p></div></div><div id="cell10" class="cellWrapper"><div id="editCell10" class="cell" hidden="true" style="display: none;"><div class="input"><div id="editor10" class="cell editor ace_editor ace-chaos ace_dark"><div style="position: absolute;"></div><textarea class="ace_text-input" wrap="off" autocapitalize="off" spellcheck="false" style="opacity: 0;"></textarea><div class="ace_gutter"><div class="ace_layer ace_gutter-layer ace_folding-enabled"></div><div class="ace_gutter-active-line"></div></div><div class="ace_scroller"><div class="ace_content"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 4px; visibility: hidden;"></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px;"><div class="ace_scrollbar-inner" style="width: 20px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px;"><div class="ace_scrollbar-inner" style="height: 20px;"></div></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div><a id="runCode10" role="button" class="runButton btn disabled" disabled="disabled" "=""><i class="fa fa-play-circle-o fa-2x"></i></a></div></div><div id="renderDisplay10" class="cell"><div class="newslide"></div><div class="slideStart" id="slide8"></div><h3>Sentence Segmentation</h3><p><span class="summary">Most NLP tools work on a <strong>per-sentence basis</strong>. To find sentence splits we can again use <strong>regular expressions</strong> .</span></p></div></div><div id="cell11" class="cellWrapper"><div id="editCell11" class="cell" hidden="true" style="display: block;"><div class="input"><div id="editor11" class="cell editor ace_editor ace-chaos ace_dark" style="height: 98px;"><div style="position: absolute;"></div><textarea class="ace_text-input" wrap="off" autocapitalize="off" spellcheck="false" style="opacity: 0; height: 26px; width: 11.4019px; left: 311.243px; top: 62px;"></textarea><div class="ace_gutter"><div class="ace_layer ace_gutter-layer ace_folding-enabled" style="margin-top: 10px; height: 150px; width: 45px;"><div class="ace_gutter-cell " style="height: 26px;">1</div><div class="ace_gutter-cell " style="height: 26px;">2</div><div class="ace_gutter-cell " style="height: 26px;">3</div></div><div class="ace_gutter-active-line" style="top: 62px; height: 26px;"></div></div><div class="ace_scroller" style="left: 45px; right: 0px; bottom: 0px;"><div class="ace_content" style="margin-top: 10px; width: 1051px; height: 150px; margin-left: 0px;"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 916.15px; visibility: hidden;"></div></div><div class="ace_layer ace_marker-layer"><div class="ace_bracket ace_start" style="height:26px;width:11.401875px;top:52px;left:140.8225px;"></div></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"><div class="ace_line_group" style="height:26px"><div class="ace_line" style="height:26px"><span class="ace_keyword">val</span>&nbsp;<span class="ace_identifier">segmenter</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">Segmenter</span>.<span class="ace_identifier">fromRegEx</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">"^</span>\\<span class="ace_string">.$"</span><span class="ace_paren ace_rparen">)</span></div></div><div class="ace_line_group" style="height:26px"><div class="ace_line" style="height:26px"><span class="ace_keyword">val</span>&nbsp;<span class="ace_identifier">segmented</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">segmenter</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">tokenized</span><span class="ace_paren ace_rparen">)</span></div></div><div class="ace_line_group" style="height:26px"><div class="ace_line" style="height:26px"><span class="ace_identifier">renderTokens</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">segmented</span><span class="ace_paren ace_rparen">)</span></div></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor" style="left: 266.243px; top: 52px; width: 11.4019px; height: 26px;"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px; bottom: 0px;"><div class="ace_scrollbar-inner" style="width: 20px; height: 98px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px; left: 45px; right: 0px;"><div class="ace_scrollbar-inner" style="height: 20px; width: 1051px;"></div></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div><a id="runCode11" role="button" class="runButton btn disabled" disabled="disabled" "=""><i class="fa fa-play-circle-o fa-2x"></i></a></div></div><div id="renderDisplay11" class="cell"><div class="string-result"><div id="brat1970554308" class="hasSVG" style="display: block; height: 246.6px;"><svg version="1.1" viewBox="0 0 416.66666666666663 137" class="bratsvg" style="width: 750.6px; height: 246.6px;"><!-- document: undefined/undefined --><defs><filter id="Gaussian_Blur"><fegaussianblur in="SourceGraphic" stddeviation="2"></fegaussianblur></filter><marker id="drag_arrow" refX="5" refY="2.5" markerWidth="5" markerHeight="5" orient="auto" markerUnits="strokeWidth" class="drag_fill"><polyline points="0,0 5,2.5 0,5 0.2,2.5"></polyline></marker></defs><g class="background"><rect x="0" y="3.5" width="416.66666666666663" height="45" class="background0"></rect><rect x="0" y="48.5" width="416.66666666666663" height="45" class="background1"></rect><rect x="0" y="93.5" width="416.66666666666663" height="45" class="background0"></rect></g><g class="glow"></g><g class="highlight"><rect x="34.5" y="33" width="13.9921875" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="77.8515625" y="33" width="3.333984375" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="31.5" y="78" width="21.3515625" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="65.3515625" y="78" width="47.3671875" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="130.21875" y="78" width="8.666015625" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="158.0703125" y="78" width="36.978515625" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="212.421875" y="78" width="10.0078125" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="255.7734375" y="78" width="6.673828125" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="282.625" y="78" width="36.673828125" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="330.9765625" y="78" width="22.6875" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="378.328125" y="78" width="3.333984375" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="29.5" y="123" width="24" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="65.3515625" y="123" width="38.3203125" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="119.171875" y="123" width="13.34765625" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="157.5234375" y="123" width="19.34765625" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="200.875" y="123" width="6.673828125" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect></g><g class="text"><text x="0" y="0"><tspan x="34.5" y="43" data-chunk-id="0" class="brat-text">Mr</tspan><tspan x="77.8515625" y="43" data-chunk-id="1" class="brat-text">. </tspan></text><text x="0" y="0"><tspan x="31.5" y="88" data-chunk-id="2" class="brat-text">Bob </tspan><tspan x="65.3515625" y="88" data-chunk-id="3" class="brat-text">Dobolina </tspan><tspan x="130.21875" y="88" data-chunk-id="4" class="brat-text">is </tspan><tspan x="158.0703125" y="88" data-chunk-id="5" class="brat-text">thinkin' </tspan><tspan x="212.421875" y="88" data-chunk-id="6" class="brat-text">of </tspan><tspan x="255.7734375" y="88" data-chunk-id="7" class="brat-text">a </tspan><tspan x="282.625" y="88" data-chunk-id="8" class="brat-text">master </tspan><tspan x="330.9765625" y="88" data-chunk-id="9" class="brat-text">plan</tspan><tspan x="378.328125" y="88" data-chunk-id="10" class="brat-text">. </tspan></text><text x="0" y="0"><tspan x="29.5" y="133" data-chunk-id="11" class="brat-text">Why </tspan><tspan x="65.3515625" y="133" data-chunk-id="12" class="brat-text">doesn't </tspan><tspan x="119.171875" y="133" data-chunk-id="13" class="brat-text">he </tspan><tspan x="157.5234375" y="133" data-chunk-id="14" class="brat-text">quit</tspan><tspan x="200.875" y="133" data-chunk-id="15" class="brat-text">?</tspan></text></g><g transform="translate(0, 43)"><g></g><g transform="translate(34.5, 0)"><g></g><g class="span"><rect x="-10.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T0" data-fragment-id="0"></rect><text x="6.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 6.5,-10.5 6.5,-14.5C6.5,-10.5 13.9921875,-14.5 13.9921875,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(77.8515625, 0)"><g></g><g class="span"><rect x="-16.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T1" data-fragment-id="0"></rect><text x="1.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 1.5,-10.5 1.5,-14.5C1.5,-10.5 3.333984375,-14.5 3.333984375,-10.5" class="curly" stroke="gray"></path></g></g><g class="arcs"></g></g><g transform="translate(0, 88)"><g></g><g transform="translate(31.5, 0)"><g></g><g class="span"><rect x="-7.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T2" data-fragment-id="0"></rect><text x="10.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 10.5,-10.5 10.5,-14.5C10.5,-10.5 21.3515625,-14.5 21.3515625,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(65.3515625, 0)"><g></g><g class="span"><rect x="5.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T3" data-fragment-id="0"></rect><text x="23.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 23.5,-10.5 23.5,-14.5C23.5,-10.5 47.3671875,-14.5 47.3671875,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(130.21875, 0)"><g></g><g class="span"><rect x="-13.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T4" data-fragment-id="0"></rect><text x="4.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 4.5,-10.5 4.5,-14.5C4.5,-10.5 8.666015625,-14.5 8.666015625,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(158.0703125, 0)"><g></g><g class="span"><rect x="0.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T5" data-fragment-id="0"></rect><text x="18.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 18.5,-10.5 18.5,-14.5C18.5,-10.5 36.978515625,-14.5 36.978515625,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(212.421875, 0)"><g></g><g class="span"><rect x="-12.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T6" data-fragment-id="0"></rect><text x="5.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 5.5,-10.5 5.5,-14.5C5.5,-10.5 10.0078125,-14.5 10.0078125,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(255.7734375, 0)"><g></g><g class="span"><rect x="-14.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T7" data-fragment-id="0"></rect><text x="3.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 3.5,-10.5 3.5,-14.5C3.5,-10.5 6.673828125,-14.5 6.673828125,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(282.625, 0)"><g></g><g class="span"><rect x="0.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T8" data-fragment-id="0"></rect><text x="18.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 18.5,-10.5 18.5,-14.5C18.5,-10.5 36.673828125,-14.5 36.673828125,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(330.9765625, 0)"><g></g><g class="span"><rect x="-6.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T9" data-fragment-id="0"></rect><text x="11.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 11.5,-10.5 11.5,-14.5C11.5,-10.5 22.6875,-14.5 22.6875,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(378.328125, 0)"><g></g><g class="span"><rect x="-16.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T10" data-fragment-id="0"></rect><text x="1.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 1.5,-10.5 1.5,-14.5C1.5,-10.5 3.333984375,-14.5 3.333984375,-10.5" class="curly" stroke="gray"></path></g></g><g class="arcs"></g></g><g transform="translate(0, 133)"><g></g><g transform="translate(29.5, 0)"><g></g><g class="span"><rect x="-5.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T11" data-fragment-id="0"></rect><text x="12.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 12.5,-10.5 12.5,-14.5C12.5,-10.5 24,-14.5 24,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(65.3515625, 0)"><g></g><g class="span"><rect x="0.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T12" data-fragment-id="0"></rect><text x="19.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 19.5,-10.5 19.5,-14.5C19.5,-10.5 38.3203125,-14.5 38.3203125,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(119.171875, 0)"><g></g><g class="span"><rect x="-11.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T13" data-fragment-id="0"></rect><text x="6.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 6.5,-10.5 6.5,-14.5C6.5,-10.5 13.34765625,-14.5 13.34765625,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(157.5234375, 0)"><g></g><g class="span"><rect x="-8.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T14" data-fragment-id="0"></rect><text x="9.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 9.5,-10.5 9.5,-14.5C9.5,-10.5 19.34765625,-14.5 19.34765625,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(200.875, 0)"><g></g><g class="span"><rect x="-14.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T15" data-fragment-id="0"></rect><text x="3.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 3.5,-10.5 3.5,-14.5C3.5,-10.5 6.673828125,-14.5 6.673828125,-10.5" class="curly" stroke="gray"></path></g></g><g class="arcs"></g></g><g class="sentnum"><a href="#undefined?focus=sent~1"><text x="18" y="43" data-sent="1">1</text></a><a href="#undefined?focus=sent~2"><text x="18" y="88" data-sent="2">2</text></a><a href="#undefined?focus=sent~3"><text x="18" y="133" data-sent="3">3</text></a><path d="M20,0L20,137"></path></g></svg></div>

 <link rel="stylesheet" type="text/css" href="../assets/javascripts/brat/style-vis.css">
 <link rel="stylesheet" type="text/css" href="../assets/stylesheets/wolfe-brat.css">


<script type="text/javascript">
        var bratLocation;

             console.log("embedBrat");
             if (typeof bratLocation === 'undefined') {
                bratLocation = "../assets/javascripts/brat";
                head.js(
                    // External libraries
                    bratLocation + '/client/lib/jquery.min.js',
                    bratLocation + '/client/lib/jquery.svg.min.js',
                    bratLocation + '/client/lib/jquery.svgdom.min.js',

                    // brat helper modules
                    bratLocation + '/client/src/configuration.js',
                    bratLocation + '/client/src/util.js',
                    bratLocation + '/client/src/annotation_log.js',
                    bratLocation + '/client/lib/webfont.js',

                    // brat modules
                    bratLocation + '/client/src/dispatcher.js',
                    bratLocation + '/client/src/url_monitor.js',
                    bratLocation + '/client/src/visualizer.js'
                 );
                 console.log("head.js called");
             }

             head.ready(function() {
                console.log("Head is ready");
                console.log("Huh?");

                var collData =
{
}
      ;

                var docData =
{
    // Our text of choice
    text     : "Mr. Bob Dobolina is thinkin' of a master plan. Why doesn't he quit?",
    // The entities entry holds all entity annotations
    entities : [
        /* Format: [{ID}, {TYPE}, [[{START}, {END}]]]
            note that range of the offsets are [{START},{END}) */
        ['T0','Token',[[0,2]]],
['T1','Token',[[2,3]]],
['T2','Token',[[4,7]]],
['T3','Token',[[8,16]]],
['T4','Token',[[17,19]]],
['T5','Token',[[20,28]]],
['T6','Token',[[29,31]]],
['T7','Token',[[32,33]]],
['T8','Token',[[34,40]]],
['T9','Token',[[41,45]]],
['T10','Token',[[45,46]]],
['T11','Token',[[47,50]]],
['T12','Token',[[51,58]]],
['T13','Token',[[59,61]]],
['T14','Token',[[62,66]]],
['T15','Token',[[66,67]]]
    ],
    sentence_offsets: [[0,3],[4,46],[47,67]],
    token_offsets: [[0,2],[2,3],[4,7],[8,16],[17,19],[20,28],[29,31],[32,33],[34,40],[41,45],[45,46],[47,50],[51,58],[59,61],[62,66],[66,67]],
    relations: []

}
      ;
                var currentWidth = jQuery('#brat1970554308').width();
                console.log(jQuery('#brat1970554308').width());

                var dispatcher = Util.embedWithForceWidth(
                    // id of the div element where brat should embed the visualisations
                    'brat1970554308',
                    // object containing collection data
                    collData,
                    // object containing document data
                    docData,
                    // Array containing locations of the visualisation fonts

[
    '../assets/javascripts/brat' + '/static/fonts/PT_Sans-Caption-Web-Regular.ttf',
    '../assets/javascripts/brat' + '/static/fonts/Liberation_Sans-Regular.ttf'
]
      ,
                    //forceWidth
                    typeof bratSVGScale !== 'undefined' ? currentWidth / bratSVGScale : currentWidth
                    );
                console.log("Dispatcher:");
                console.log(dispatcher);
                dispatcher.on('doneRendering', function() {
                    console.log("Done Rendering!");
                    var scale = typeof bratSVGScale !== 'undefined' ? bratSVGScale : 1;
                    var div = jQuery('#brat1970554308');
                    var svg = jQuery('svg',div);
                    var newHeight = scale * svg.height();
                    var newWidth = scale * svg.width();
                    svg.height(newHeight).width(newWidth);
                    div.height(newHeight);
                });
            });



    </script></div></div></div><div id="cell12" class="cellWrapper"><div id="editCell12" class="cell" hidden="true" style="display: none;"><div class="input"><div id="editor12" class="cell editor ace_editor ace-chaos ace_dark"><div style="position: absolute;"></div><textarea class="ace_text-input" wrap="off" autocapitalize="off" spellcheck="false" style="opacity: 0;"></textarea><div class="ace_gutter"><div class="ace_layer ace_gutter-layer ace_folding-enabled"></div><div class="ace_gutter-active-line"></div></div><div class="ace_scroller"><div class="ace_content"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 4px; visibility: hidden;"></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px;"><div class="ace_scrollbar-inner" style="width: 20px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px;"><div class="ace_scrollbar-inner" style="height: 20px;"></div></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div><a id="runCode12" role="button" class="runButton btn disabled" disabled="disabled" "=""><i class="fa fa-play-circle-o fa-2x"></i></a></div></div><div id="renderDisplay12" class="cell"><div class="newslide"></div><div class="slideStart" id="slide9"></div><p><span class="summary">This is still bad, but we can the default tokenizer and segmenter to fix this.</span></p></div></div><div id="cell13" class="cellWrapper"><div id="editCell13" class="cell" hidden="true" style="display: block;"><div class="input"><div id="editor13" class="cell editor ace_editor ace-chaos ace_dark" style="height: 72px;"><div style="position: absolute;"></div><textarea class="ace_text-input" wrap="off" autocapitalize="off" spellcheck="false" style="opacity: 0; height: 26px; width: 11.4019px; left: 356.851px; top: 36px;"></textarea><div class="ace_gutter"><div class="ace_layer ace_gutter-layer ace_folding-enabled" style="margin-top: 10px; height: 124px; width: 45px;"><div class="ace_gutter-cell " style="height: 26px;">1</div><div class="ace_gutter-cell " style="height: 26px;">2</div></div><div class="ace_gutter-active-line" style="top: 36px; height: 26px;"></div></div><div class="ace_scroller" style="left: 45px; right: 0px; bottom: 0px;"><div class="ace_content" style="margin-top: 10px; width: 1051px; height: 124px; margin-left: 0px;"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 916.15px; visibility: hidden;"></div></div><div class="ace_layer ace_marker-layer"><div class="ace_bracket ace_start" style="height:26px;width:11.401875px;top:26px;left:140.8225px;"></div></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"><div class="ace_line_group" style="height:26px"><div class="ace_line" style="height:26px"><span class="ace_keyword">val</span>&nbsp;<span class="ace_identifier">pipeline</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">Tokenizer</span>.<span class="ace_keyword">default</span>&nbsp;<span class="ace_identifier">andThen</span>&nbsp;<span class="ace_identifier">Segmenter</span>.<span class="ace_keyword">default</span></div></div><div class="ace_line_group" style="height:26px"><div class="ace_line" style="height:26px"><span class="ace_identifier">renderTokens</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">pipeline</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">doc</span><span class="ace_paren ace_rparen">))</span></div></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor" style="left: 311.851px; top: 26px; width: 11.4019px; height: 26px;"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px; bottom: 0px;"><div class="ace_scrollbar-inner" style="width: 20px; height: 72px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px; left: 45px; right: 0px;"><div class="ace_scrollbar-inner" style="height: 20px; width: 1051px;"></div></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div><a id="runCode13" role="button" class="runButton btn disabled" disabled="disabled" "=""><i class="fa fa-play-circle-o fa-2x"></i></a></div></div><div id="renderDisplay13" class="cell"><div class="string-result"><div id="brat1147141579" class="hasSVG" style="display: block; height: 246.6px;"><svg version="1.1" viewBox="0 0 416.66666666666663 137" class="bratsvg" style="width: 750.6px; height: 246.6px;"><!-- document: undefined/undefined --><defs><filter id="Gaussian_Blur"><fegaussianblur in="SourceGraphic" stddeviation="2"></fegaussianblur></filter><marker id="drag_arrow" refX="5" refY="2.5" markerWidth="5" markerHeight="5" orient="auto" markerUnits="strokeWidth" class="drag_fill"><polyline points="0,0 5,2.5 0,5 0.2,2.5"></polyline></marker></defs><g class="background"><rect x="0" y="3.5" width="416.66666666666663" height="45" class="background0"></rect><rect x="0" y="48.5" width="416.66666666666663" height="45" class="background0"></rect><rect x="0" y="93.5" width="416.66666666666663" height="45" class="background1"></rect></g><g class="glow"></g><g class="highlight"><rect x="33.5" y="33" width="17.326171875" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="72.8515625" y="33" width="21.3515625" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="106.703125" y="33" width="47.3671875" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="171.5703125" y="33" width="8.666015625" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="199.421875" y="33" width="36.978515625" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="253.7734375" y="33" width="10.0078125" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="297.125" y="33" width="6.673828125" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="323.9765625" y="33" width="36.673828125" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="372.328125" y="33" width="22.6875" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="40.5" y="78" width="3.333984375" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="29.5" y="123" width="24" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="65.3515625" y="123" width="38.3203125" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="119.171875" y="123" width="13.34765625" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="157.5234375" y="123" width="19.34765625" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect><rect x="200.875" y="123" width="6.673828125" height="12.5" fill="#ffffff" opacity="0.3" rx="3" ry="3"></rect></g><g class="text"><text x="0" y="0"><tspan x="33.5" y="43" data-chunk-id="0" class="brat-text">Mr. </tspan><tspan x="72.8515625" y="43" data-chunk-id="1" class="brat-text">Bob </tspan><tspan x="106.703125" y="43" data-chunk-id="2" class="brat-text">Dobolina </tspan><tspan x="171.5703125" y="43" data-chunk-id="3" class="brat-text">is </tspan><tspan x="199.421875" y="43" data-chunk-id="4" class="brat-text">thinkin' </tspan><tspan x="253.7734375" y="43" data-chunk-id="5" class="brat-text">of </tspan><tspan x="297.125" y="43" data-chunk-id="6" class="brat-text">a </tspan><tspan x="323.9765625" y="43" data-chunk-id="7" class="brat-text">master </tspan><tspan x="372.328125" y="43" data-chunk-id="8" class="brat-text">plan</tspan><tspan x="40.5" y="88" data-chunk-id="9" class="brat-text">. </tspan></text><text x="0" y="0"><tspan x="29.5" y="133" data-chunk-id="10" class="brat-text">Why </tspan><tspan x="65.3515625" y="133" data-chunk-id="11" class="brat-text">doesn't </tspan><tspan x="119.171875" y="133" data-chunk-id="12" class="brat-text">he </tspan><tspan x="157.5234375" y="133" data-chunk-id="13" class="brat-text">quit</tspan><tspan x="200.875" y="133" data-chunk-id="14" class="brat-text">?</tspan></text></g><g transform="translate(0, 43)"><g></g><g transform="translate(33.5, 0)"><g></g><g class="span"><rect x="-9.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T0" data-fragment-id="0"></rect><text x="8.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 8.5,-10.5 8.5,-14.5C8.5,-10.5 17.326171875,-14.5 17.326171875,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(72.8515625, 0)"><g></g><g class="span"><rect x="-7.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T1" data-fragment-id="0"></rect><text x="10.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 10.5,-10.5 10.5,-14.5C10.5,-10.5 21.3515625,-14.5 21.3515625,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(106.703125, 0)"><g></g><g class="span"><rect x="5.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T2" data-fragment-id="0"></rect><text x="23.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 23.5,-10.5 23.5,-14.5C23.5,-10.5 47.3671875,-14.5 47.3671875,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(171.5703125, 0)"><g></g><g class="span"><rect x="-13.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T3" data-fragment-id="0"></rect><text x="4.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 4.5,-10.5 4.5,-14.5C4.5,-10.5 8.666015625,-14.5 8.666015625,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(199.421875, 0)"><g></g><g class="span"><rect x="0.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T4" data-fragment-id="0"></rect><text x="18.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 18.5,-10.5 18.5,-14.5C18.5,-10.5 36.978515625,-14.5 36.978515625,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(253.7734375, 0)"><g></g><g class="span"><rect x="-12.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T5" data-fragment-id="0"></rect><text x="5.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 5.5,-10.5 5.5,-14.5C5.5,-10.5 10.0078125,-14.5 10.0078125,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(297.125, 0)"><g></g><g class="span"><rect x="-14.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T6" data-fragment-id="0"></rect><text x="3.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 3.5,-10.5 3.5,-14.5C3.5,-10.5 6.673828125,-14.5 6.673828125,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(323.9765625, 0)"><g></g><g class="span"><rect x="0.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T7" data-fragment-id="0"></rect><text x="18.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 18.5,-10.5 18.5,-14.5C18.5,-10.5 36.673828125,-14.5 36.673828125,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(372.328125, 0)"><g></g><g class="span"><rect x="-6.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T8" data-fragment-id="0"></rect><text x="11.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 11.5,-10.5 11.5,-14.5C11.5,-10.5 22.6875,-14.5 22.6875,-10.5" class="curly" stroke="gray"></path></g></g><g class="arcs"></g></g><g transform="translate(0, 88)"><g></g><g transform="translate(40.5, 0)"><g></g><g class="span"><rect x="-16.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T9" data-fragment-id="0"></rect><text x="1.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 1.5,-10.5 1.5,-14.5C1.5,-10.5 3.333984375,-14.5 3.333984375,-10.5" class="curly" stroke="gray"></path></g></g><g class="arcs"></g></g><g transform="translate(0, 133)"><g></g><g transform="translate(29.5, 0)"><g></g><g class="span"><rect x="-5.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T10" data-fragment-id="0"></rect><text x="12.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 12.5,-10.5 12.5,-14.5C12.5,-10.5 24,-14.5 24,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(65.3515625, 0)"><g></g><g class="span"><rect x="0.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T11" data-fragment-id="0"></rect><text x="19.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 19.5,-10.5 19.5,-14.5C19.5,-10.5 38.3203125,-14.5 38.3203125,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(119.171875, 0)"><g></g><g class="span"><rect x="-11.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T12" data-fragment-id="0"></rect><text x="6.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 6.5,-10.5 6.5,-14.5C6.5,-10.5 13.34765625,-14.5 13.34765625,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(157.5234375, 0)"><g></g><g class="span"><rect x="-8.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T13" data-fragment-id="0"></rect><text x="9.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 9.5,-10.5 9.5,-14.5C9.5,-10.5 19.34765625,-14.5 19.34765625,-10.5" class="curly" stroke="gray"></path></g></g><g transform="translate(200.875, 0)"><g></g><g class="span"><rect x="-14.5" y="-28" width="37.3515625" height="12.5" class="span_Token span_default" fill="#ffffff" stroke="#000000" rx="2" ry="1" data-span-id="T14" data-fragment-id="0"></rect><text x="3.5" y="-17.5" fill="#000000">Token</text><path d="M0,-10.5C0,-14.5 3.5,-10.5 3.5,-14.5C3.5,-10.5 6.673828125,-14.5 6.673828125,-10.5" class="curly" stroke="gray"></path></g></g><g class="arcs"></g></g><g class="sentnum"><a href="#undefined?focus=sent~1"><text x="18" y="43" data-sent="1">1</text></a><a href="#undefined?focus=sent~2"><text x="18" y="133" data-sent="2">2</text></a><path d="M20,0L20,137"></path></g></svg></div>

 <link rel="stylesheet" type="text/css" href="../assets/javascripts/brat/style-vis.css">
 <link rel="stylesheet" type="text/css" href="../assets/stylesheets/wolfe-brat.css">


<script type="text/javascript">
        var bratLocation;

             console.log("embedBrat");
             if (typeof bratLocation === 'undefined') {
                bratLocation = "../assets/javascripts/brat";
                head.js(
                    // External libraries
                    bratLocation + '/client/lib/jquery.min.js',
                    bratLocation + '/client/lib/jquery.svg.min.js',
                    bratLocation + '/client/lib/jquery.svgdom.min.js',

                    // brat helper modules
                    bratLocation + '/client/src/configuration.js',
                    bratLocation + '/client/src/util.js',
                    bratLocation + '/client/src/annotation_log.js',
                    bratLocation + '/client/lib/webfont.js',

                    // brat modules
                    bratLocation + '/client/src/dispatcher.js',
                    bratLocation + '/client/src/url_monitor.js',
                    bratLocation + '/client/src/visualizer.js'
                 );
                 console.log("head.js called");
             }

             head.ready(function() {
                console.log("Head is ready");
                console.log("Huh?");

                var collData =
{
}
      ;

                var docData =
{
    // Our text of choice
    text     : "Mr. Bob Dobolina is thinkin' of a master plan. Why doesn't he quit?",
    // The entities entry holds all entity annotations
    entities : [
        /* Format: [{ID}, {TYPE}, [[{START}, {END}]]]
            note that range of the offsets are [{START},{END}) */
        ['T0','Token',[[0,3]]],
['T1','Token',[[4,7]]],
['T2','Token',[[8,16]]],
['T3','Token',[[17,19]]],
['T4','Token',[[20,28]]],
['T5','Token',[[29,31]]],
['T6','Token',[[32,33]]],
['T7','Token',[[34,40]]],
['T8','Token',[[41,45]]],
['T9','Token',[[45,46]]],
['T10','Token',[[47,50]]],
['T11','Token',[[51,58]]],
['T12','Token',[[59,61]]],
['T13','Token',[[62,66]]],
['T14','Token',[[66,67]]]
    ],
    sentence_offsets: [[0,46],[47,67]],
    token_offsets: [[0,3],[4,7],[8,16],[17,19],[20,28],[29,31],[32,33],[34,40],[41,45],[45,46],[47,50],[51,58],[59,61],[62,66],[66,67]],
    relations: []

}
      ;
                var currentWidth = jQuery('#brat1147141579').width();
                console.log(jQuery('#brat1147141579').width());

                var dispatcher = Util.embedWithForceWidth(
                    // id of the div element where brat should embed the visualisations
                    'brat1147141579',
                    // object containing collection data
                    collData,
                    // object containing document data
                    docData,
                    // Array containing locations of the visualisation fonts

[
    '../assets/javascripts/brat' + '/static/fonts/PT_Sans-Caption-Web-Regular.ttf',
    '../assets/javascripts/brat' + '/static/fonts/Liberation_Sans-Regular.ttf'
]
      ,
                    //forceWidth
                    typeof bratSVGScale !== 'undefined' ? currentWidth / bratSVGScale : currentWidth
                    );
                console.log("Dispatcher:");
                console.log(dispatcher);
                dispatcher.on('doneRendering', function() {
                    console.log("Done Rendering!");
                    var scale = typeof bratSVGScale !== 'undefined' ? bratSVGScale : 1;
                    var div = jQuery('#brat1147141579');
                    var svg = jQuery('svg',div);
                    var newHeight = scale * svg.height();
                    var newWidth = scale * svg.width();
                    svg.height(newHeight).width(newWidth);
                    div.height(newHeight);
                });
            });



    </script></div></div></div><div id="cell14" class="cellWrapper"><div id="editCell14" class="cell" hidden="true" style="display: none;"><div class="input"><div id="editor14" class="cell editor ace_editor ace-chaos ace_dark"><div style="position: absolute;"></div><textarea class="ace_text-input" wrap="off" autocapitalize="off" spellcheck="false" style="opacity: 0;"></textarea><div class="ace_gutter"><div class="ace_layer ace_gutter-layer ace_folding-enabled"></div><div class="ace_gutter-active-line"></div></div><div class="ace_scroller"><div class="ace_content"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 4px; visibility: hidden;"></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px;"><div class="ace_scrollbar-inner" style="width: 20px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px;"><div class="ace_scrollbar-inner" style="height: 20px;"></div></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div><a id="runCode14" role="button" class="runButton btn disabled" disabled="disabled" "=""><i class="fa fa-play-circle-o fa-2x"></i></a></div></div><div id="renderDisplay14" class="cell"><div class="newslide"></div><div class="slideStart" id="slide10"></div><h4>Exercise</h4><p>Create a regular expression tokenizer and sentence segmenter that can process Hip-Hop lyrics from <a href="#">OHHLA</a>. Use the <code>Corpora.ohhla</code> document collection and split sentences per line. </p>
<div class="newslide"></div><div class="slideStart" id="slide11"></div><h3>Background Reading</h3>
<ul>
  <li>Jurafsky &amp; Martin, Speech and Language Processing: Chapter 2, Regular Expressions and Automata.</li>
  <li>Manning, Raghavan &amp; Schuetze, Introduction to Information Retrieval: <a href="http://nlp.stanford.edu/IR-book/html/htmledition/tokenization-1.html">Tokenization</a></li>
</ul></div></div></div>
                

<script>
    var divCells = $('#static_content');
    /* COMPILERS OBJECT */
    var compilers = {};
    
        compilers.scala = {};
        compilers.scala.hideAfterCompile = false;
        compilers.scala.editor = 
function(id,content) {
    $("#editor"+id).empty();
    var editor = ace.edit("editor"+id);
    editor.setOptions({
      maxLines: Infinity,
      enableBasicAutocompletion: true,
      enableSnippets: true,
      enableLiveAutocompletion: true
    });
    editor.setTheme("ace/theme/" + doc.aceTheme);
    editor.getSession().setMode("ace/mode/scala");
    editor.getSession().setUseWrapMode(true);
    editor.getSession().setWrapLimitRange(null, null);
    var contentToAdd = ""
    if(content=="") contentToAdd = '';
    else contentToAdd = content;
    editor.renderer.setScrollMargin(10, 10, 0, 0);
    //editor.renderer.setPadding(20);
    editor.getSession().setValue(contentToAdd, 1);
    editor.focus();
    editor.navigateFileEnd();
    editor.setBehavioursEnabled(true);
    editor.setWrapBehavioursEnabled(true);
    editor.setShowFoldWidgets(true);
    editor.setHighlightActiveLine(false);
    editor.setShowPrintMargin(false);
    editor.setAutoScrollEditorIntoView(true);
    editor.renderer.setShowGutter(true);
    editor.on('change', function () {
        //heightUpdateFunction(editor, '#editor'+id);
    });
    if(!doc.allowExecution) editor.setReadOnly(true);

    editor.commands.addCommand({
        name: "runCode",
        bindKey: {win: "Ctrl-Enter", mac: "Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById("runCode"+id).click();
        }
    })
    editor.getSession().on('change', function() {
      var mode = currentMode(id);
      if(mode=='markdown' || mode=='html') {
        //document.getElementById("runCode"+id).click();
      }
    });
    editor.commands.addCommand({
        name: "addCellBelow",
        bindKey: {win: "Shift-Enter", mac: "Shift-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.focus();
              ne.insert(text,1);
              ne.navigateTo(0, 0);
              newId = nextCellId(id);
              changeMode(newId,oldMode)
              console.log("changing " + newId + " to " + oldMode);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "injectEmptyCell",
        bindKey: {win: "Shift-Ctrl-Enter", mac: "Shift-Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.insert(text,1);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
            if (!(ne.getValue().trim() === "")) document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            newId = nextCellId(id);
            changeMode(newId,toggledMode(oldMode));
            if(typeof(ne)!='undefined') {
              ne.focus();
              ne.navigateTo(0, 0);
            }
        }
    })
    editor.commands.addCommand({
        name: "deleteCell",
        bindKey: {win: "Shift-Del", mac: "Shift-Del"},
        exec: function(editor) {
            document.getElementById('remove' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "moveCursorRight",
        bindKey: {win: 'Right', mac: 'Right'},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            if(editor.getCursorPosition().row == eodRow &&
               editor.getCursorPosition().column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateFileStart();
                ne.focus();
              }
            }
            editor.navigateRight(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorLeft",
        bindKey: {win: 'Left', mac: 'Left'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0 &&
               editor.getCursorPosition().column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateFileEnd();
                pe.focus();
              }
            }
            editor.navigateLeft(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorUp",
        bindKey: {win: 'Up', mac: 'Up'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateTo(pe.getSession().getDocument().getLength()-1, editor.getCursorPosition().column);
                pe.focus();
              }
            }
            editor.navigateUp(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorDown",
        bindKey: {win: 'Down', mac: 'Down'},
        exec: function(editor) {
            if(editor.getCursorPosition().row + 1 == editor.getSession().getDocument().getLength()) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateTo(0, editor.getCursorPosition().column);
                ne.focus();
              }
            }
            editor.navigateDown(1);
        }
    })
    editor.commands.addCommand({
        name: "mergeBefore",
        bindKey: {win: "Shift-Backspace|Backspace", mac: "Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"},
        exec: function(editor) {
            var curPos = editor.getCursorPosition();
            if(curPos.row == 0 && curPos.column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                console.log("merge with previous!");
                var text = editor.getSession().getDocument().getValue();
                pe.focus();
                pe.gotoLine(pe.getSession().getDocument().getLength());
                pe.navigateLineEnd();
                var newCurPos = pe.getCursorPosition();
                pe.insert('\n'+ text);
                pe.navigateTo(newCurPos.row+1, 0);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("left");
            }
        }
    })
    editor.commands.addCommand({
        name: "mergeAfter",
        bindKey: {win: "Delete", mac: "Delete|Ctrl-D|Shift-Delete"},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            var curPos = editor.getCursorPosition();
            if(curPos.row == eodRow && curPos.column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                console.log("merge with after!");
                var text = editor.getSession().getDocument().getValue();
                ne.focus();
                ne.navigateTo(0, 0);
                ne.insert(text+'\n', 1);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("right");
            }
        }
    })
    editor.commands.addCommand({
        name: "saveDoc",
        bindKey: {win: "Ctrl-S", mac: "Cmd-S"},
        exec: function(editor) {
            saveDoc(doc, compilers);
        }
    })
    editor.commands.addCommand({
        name: "modeScala",
        bindKey: {win: "Ctrl-Alt-S", mac: "Ctrl-Alt-S"},
        exec: function(editor) {
            console.log("changing mode to scala");
            changeMode(id,'scala');
        }
    })
    editor.commands.addCommand({
        name: "modeMarkdown",
        bindKey: {win: "Ctrl-Alt-M", mac: "Ctrl-Alt-M"},
        exec: function(editor) {
            console.log("changing mode to markdown");
            changeMode(id,'markdown');
        }
    })
    editor.commands.addCommand({
        name: "toggleMode",
        bindKey: {win: "Ctrl-M", mac: "Ctrl-M"},
        exec: function(editor) {
            mode = currentMode(id);
            console.log("changing mode to " + toggledMode(mode));
            changeMode(id, toggledMode(mode));
        }
    })
    //heightUpdateFunction(editor, '#editor'+id);
    return editor;
}
    ;
        compilers.scala.editorToInput = 
function (doc, id) {
  input = {}
  input.code = doc.cells[id].editor.getSession().getValue();
  return input;
};
    ;
        compilers.scala.aggregate = true;
    
        compilers.markdown = {};
        compilers.markdown.hideAfterCompile = true;
        compilers.markdown.editor = 
function(id,content) {
    $("#editor"+id).empty();
    var editor = ace.edit("editor"+id);
    editor.setOptions({
      maxLines: Infinity,
      enableBasicAutocompletion: true,
      enableSnippets: true,
      enableLiveAutocompletion: true
    });
    editor.setTheme("ace/theme/" + doc.aceTheme);
    editor.getSession().setMode("ace/mode/markdown");
    editor.getSession().setUseWrapMode(true);
    editor.getSession().setWrapLimitRange(null, null);
    var contentToAdd = ""
    if(content=="") contentToAdd = '';
    else contentToAdd = content;
    editor.renderer.setScrollMargin(10, 10, 0, 0);
    //editor.renderer.setPadding(20);
    editor.getSession().setValue(contentToAdd, 1);
    editor.focus();
    editor.navigateFileEnd();
    editor.setBehavioursEnabled(true);
    editor.setWrapBehavioursEnabled(true);
    editor.setShowFoldWidgets(true);
    editor.setHighlightActiveLine(false);
    editor.setShowPrintMargin(false);
    editor.setAutoScrollEditorIntoView(true);
    editor.renderer.setShowGutter(true);
    editor.on('change', function () {
        //heightUpdateFunction(editor, '#editor'+id);
    });
    if(!doc.allowExecution) editor.setReadOnly(true);

    editor.commands.addCommand({
        name: "runCode",
        bindKey: {win: "Ctrl-Enter", mac: "Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById("runCode"+id).click();
        }
    })
    editor.getSession().on('change', function() {
      var mode = currentMode(id);
      if(mode=='markdown' || mode=='html') {
        //document.getElementById("runCode"+id).click();
      }
    });
    editor.commands.addCommand({
        name: "addCellBelow",
        bindKey: {win: "Shift-Enter", mac: "Shift-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.focus();
              ne.insert(text,1);
              ne.navigateTo(0, 0);
              newId = nextCellId(id);
              changeMode(newId,oldMode)
              console.log("changing " + newId + " to " + oldMode);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "injectEmptyCell",
        bindKey: {win: "Shift-Ctrl-Enter", mac: "Shift-Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.insert(text,1);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
            if (!(ne.getValue().trim() === "")) document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            newId = nextCellId(id);
            changeMode(newId,toggledMode(oldMode));
            if(typeof(ne)!='undefined') {
              ne.focus();
              ne.navigateTo(0, 0);
            }
        }
    })
    editor.commands.addCommand({
        name: "deleteCell",
        bindKey: {win: "Shift-Del", mac: "Shift-Del"},
        exec: function(editor) {
            document.getElementById('remove' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "moveCursorRight",
        bindKey: {win: 'Right', mac: 'Right'},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            if(editor.getCursorPosition().row == eodRow &&
               editor.getCursorPosition().column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateFileStart();
                ne.focus();
              }
            }
            editor.navigateRight(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorLeft",
        bindKey: {win: 'Left', mac: 'Left'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0 &&
               editor.getCursorPosition().column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateFileEnd();
                pe.focus();
              }
            }
            editor.navigateLeft(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorUp",
        bindKey: {win: 'Up', mac: 'Up'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateTo(pe.getSession().getDocument().getLength()-1, editor.getCursorPosition().column);
                pe.focus();
              }
            }
            editor.navigateUp(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorDown",
        bindKey: {win: 'Down', mac: 'Down'},
        exec: function(editor) {
            if(editor.getCursorPosition().row + 1 == editor.getSession().getDocument().getLength()) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateTo(0, editor.getCursorPosition().column);
                ne.focus();
              }
            }
            editor.navigateDown(1);
        }
    })
    editor.commands.addCommand({
        name: "mergeBefore",
        bindKey: {win: "Shift-Backspace|Backspace", mac: "Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"},
        exec: function(editor) {
            var curPos = editor.getCursorPosition();
            if(curPos.row == 0 && curPos.column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                console.log("merge with previous!");
                var text = editor.getSession().getDocument().getValue();
                pe.focus();
                pe.gotoLine(pe.getSession().getDocument().getLength());
                pe.navigateLineEnd();
                var newCurPos = pe.getCursorPosition();
                pe.insert('\n'+ text);
                pe.navigateTo(newCurPos.row+1, 0);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("left");
            }
        }
    })
    editor.commands.addCommand({
        name: "mergeAfter",
        bindKey: {win: "Delete", mac: "Delete|Ctrl-D|Shift-Delete"},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            var curPos = editor.getCursorPosition();
            if(curPos.row == eodRow && curPos.column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                console.log("merge with after!");
                var text = editor.getSession().getDocument().getValue();
                ne.focus();
                ne.navigateTo(0, 0);
                ne.insert(text+'\n', 1);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("right");
            }
        }
    })
    editor.commands.addCommand({
        name: "saveDoc",
        bindKey: {win: "Ctrl-S", mac: "Cmd-S"},
        exec: function(editor) {
            saveDoc(doc, compilers);
        }
    })
    editor.commands.addCommand({
        name: "modeScala",
        bindKey: {win: "Ctrl-Alt-S", mac: "Ctrl-Alt-S"},
        exec: function(editor) {
            console.log("changing mode to scala");
            changeMode(id,'scala');
        }
    })
    editor.commands.addCommand({
        name: "modeMarkdown",
        bindKey: {win: "Ctrl-Alt-M", mac: "Ctrl-Alt-M"},
        exec: function(editor) {
            console.log("changing mode to markdown");
            changeMode(id,'markdown');
        }
    })
    editor.commands.addCommand({
        name: "toggleMode",
        bindKey: {win: "Ctrl-M", mac: "Ctrl-M"},
        exec: function(editor) {
            mode = currentMode(id);
            console.log("changing mode to " + toggledMode(mode));
            changeMode(id, toggledMode(mode));
        }
    })
    //heightUpdateFunction(editor, '#editor'+id);
    return editor;
}
    ;
        compilers.markdown.editorToInput = 
function (doc, id) {
  input = {}
  input.code = doc.cells[id].editor.getSession().getValue();
  return input;
};
    ;
        compilers.markdown.aggregate = false;
    
        compilers.section = {};
        compilers.section.hideAfterCompile = true;
        compilers.section.editor = 
function(id,content) {
    $("#editor"+id).empty();
    var editor = ace.edit("editor"+id);
    editor.setOptions({
      maxLines: Infinity,
      enableBasicAutocompletion: true,
      enableSnippets: true,
      enableLiveAutocompletion: true
    });
    editor.setTheme("ace/theme/" + doc.aceTheme);
    editor.getSession().setMode("ace/mode/text");
    editor.getSession().setUseWrapMode(true);
    editor.getSession().setWrapLimitRange(null, null);
    var contentToAdd = ""
    if(content=="") contentToAdd = 'Section Name';
    else contentToAdd = content;
    editor.renderer.setScrollMargin(10, 10, 0, 0);
    //editor.renderer.setPadding(20);
    editor.getSession().setValue(contentToAdd, 1);
    editor.focus();
    editor.navigateFileEnd();
    editor.setBehavioursEnabled(true);
    editor.setWrapBehavioursEnabled(true);
    editor.setShowFoldWidgets(true);
    editor.setHighlightActiveLine(false);
    editor.setShowPrintMargin(false);
    editor.setAutoScrollEditorIntoView(true);
    editor.renderer.setShowGutter(true);
    editor.on('change', function () {
        //heightUpdateFunction(editor, '#editor'+id);
    });
    if(!doc.allowExecution) editor.setReadOnly(true);

    editor.commands.addCommand({
        name: "runCode",
        bindKey: {win: "Ctrl-Enter", mac: "Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById("runCode"+id).click();
        }
    })
    editor.getSession().on('change', function() {
      var mode = currentMode(id);
      if(mode=='markdown' || mode=='html') {
        //document.getElementById("runCode"+id).click();
      }
    });
    editor.commands.addCommand({
        name: "addCellBelow",
        bindKey: {win: "Shift-Enter", mac: "Shift-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.focus();
              ne.insert(text,1);
              ne.navigateTo(0, 0);
              newId = nextCellId(id);
              changeMode(newId,oldMode)
              console.log("changing " + newId + " to " + oldMode);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "injectEmptyCell",
        bindKey: {win: "Shift-Ctrl-Enter", mac: "Shift-Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.insert(text,1);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
            if (!(ne.getValue().trim() === "")) document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            newId = nextCellId(id);
            changeMode(newId,toggledMode(oldMode));
            if(typeof(ne)!='undefined') {
              ne.focus();
              ne.navigateTo(0, 0);
            }
        }
    })
    editor.commands.addCommand({
        name: "deleteCell",
        bindKey: {win: "Shift-Del", mac: "Shift-Del"},
        exec: function(editor) {
            document.getElementById('remove' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "moveCursorRight",
        bindKey: {win: 'Right', mac: 'Right'},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            if(editor.getCursorPosition().row == eodRow &&
               editor.getCursorPosition().column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateFileStart();
                ne.focus();
              }
            }
            editor.navigateRight(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorLeft",
        bindKey: {win: 'Left', mac: 'Left'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0 &&
               editor.getCursorPosition().column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateFileEnd();
                pe.focus();
              }
            }
            editor.navigateLeft(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorUp",
        bindKey: {win: 'Up', mac: 'Up'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateTo(pe.getSession().getDocument().getLength()-1, editor.getCursorPosition().column);
                pe.focus();
              }
            }
            editor.navigateUp(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorDown",
        bindKey: {win: 'Down', mac: 'Down'},
        exec: function(editor) {
            if(editor.getCursorPosition().row + 1 == editor.getSession().getDocument().getLength()) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateTo(0, editor.getCursorPosition().column);
                ne.focus();
              }
            }
            editor.navigateDown(1);
        }
    })
    editor.commands.addCommand({
        name: "mergeBefore",
        bindKey: {win: "Shift-Backspace|Backspace", mac: "Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"},
        exec: function(editor) {
            var curPos = editor.getCursorPosition();
            if(curPos.row == 0 && curPos.column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                console.log("merge with previous!");
                var text = editor.getSession().getDocument().getValue();
                pe.focus();
                pe.gotoLine(pe.getSession().getDocument().getLength());
                pe.navigateLineEnd();
                var newCurPos = pe.getCursorPosition();
                pe.insert('\n'+ text);
                pe.navigateTo(newCurPos.row+1, 0);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("left");
            }
        }
    })
    editor.commands.addCommand({
        name: "mergeAfter",
        bindKey: {win: "Delete", mac: "Delete|Ctrl-D|Shift-Delete"},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            var curPos = editor.getCursorPosition();
            if(curPos.row == eodRow && curPos.column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                console.log("merge with after!");
                var text = editor.getSession().getDocument().getValue();
                ne.focus();
                ne.navigateTo(0, 0);
                ne.insert(text+'\n', 1);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("right");
            }
        }
    })
    editor.commands.addCommand({
        name: "saveDoc",
        bindKey: {win: "Ctrl-S", mac: "Cmd-S"},
        exec: function(editor) {
            saveDoc(doc, compilers);
        }
    })
    editor.commands.addCommand({
        name: "modeScala",
        bindKey: {win: "Ctrl-Alt-S", mac: "Ctrl-Alt-S"},
        exec: function(editor) {
            console.log("changing mode to scala");
            changeMode(id,'scala');
        }
    })
    editor.commands.addCommand({
        name: "modeMarkdown",
        bindKey: {win: "Ctrl-Alt-M", mac: "Ctrl-Alt-M"},
        exec: function(editor) {
            console.log("changing mode to markdown");
            changeMode(id,'markdown');
        }
    })
    editor.commands.addCommand({
        name: "toggleMode",
        bindKey: {win: "Ctrl-M", mac: "Ctrl-M"},
        exec: function(editor) {
            mode = currentMode(id);
            console.log("changing mode to " + toggledMode(mode));
            changeMode(id, toggledMode(mode));
        }
    })
    //heightUpdateFunction(editor, '#editor'+id);
    return editor;
}
    ;
        compilers.section.editorToInput = 
function (doc, id) {
  input = {}
  input.code = doc.cells[id].editor.getSession().getValue();
  return input;
};
    ;
        compilers.section.aggregate = false;
    
        compilers.latex = {};
        compilers.latex.hideAfterCompile = true;
        compilers.latex.editor = 
function(id,content) {
    $("#editor"+id).empty();
    var editor = ace.edit("editor"+id);
    editor.setOptions({
      maxLines: Infinity,
      enableBasicAutocompletion: true,
      enableSnippets: true,
      enableLiveAutocompletion: true
    });
    editor.setTheme("ace/theme/" + doc.aceTheme);
    editor.getSession().setMode("ace/mode/latex");
    editor.getSession().setUseWrapMode(true);
    editor.getSession().setWrapLimitRange(null, null);
    var contentToAdd = ""
    if(content=="") contentToAdd = '';
    else contentToAdd = content;
    editor.renderer.setScrollMargin(10, 10, 0, 0);
    //editor.renderer.setPadding(20);
    editor.getSession().setValue(contentToAdd, 1);
    editor.focus();
    editor.navigateFileEnd();
    editor.setBehavioursEnabled(true);
    editor.setWrapBehavioursEnabled(true);
    editor.setShowFoldWidgets(true);
    editor.setHighlightActiveLine(false);
    editor.setShowPrintMargin(false);
    editor.setAutoScrollEditorIntoView(true);
    editor.renderer.setShowGutter(true);
    editor.on('change', function () {
        //heightUpdateFunction(editor, '#editor'+id);
    });
    if(!doc.allowExecution) editor.setReadOnly(true);

    editor.commands.addCommand({
        name: "runCode",
        bindKey: {win: "Ctrl-Enter", mac: "Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById("runCode"+id).click();
        }
    })
    editor.getSession().on('change', function() {
      var mode = currentMode(id);
      if(mode=='markdown' || mode=='html') {
        //document.getElementById("runCode"+id).click();
      }
    });
    editor.commands.addCommand({
        name: "addCellBelow",
        bindKey: {win: "Shift-Enter", mac: "Shift-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.focus();
              ne.insert(text,1);
              ne.navigateTo(0, 0);
              newId = nextCellId(id);
              changeMode(newId,oldMode)
              console.log("changing " + newId + " to " + oldMode);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "injectEmptyCell",
        bindKey: {win: "Shift-Ctrl-Enter", mac: "Shift-Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.insert(text,1);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
            if (!(ne.getValue().trim() === "")) document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            newId = nextCellId(id);
            changeMode(newId,toggledMode(oldMode));
            if(typeof(ne)!='undefined') {
              ne.focus();
              ne.navigateTo(0, 0);
            }
        }
    })
    editor.commands.addCommand({
        name: "deleteCell",
        bindKey: {win: "Shift-Del", mac: "Shift-Del"},
        exec: function(editor) {
            document.getElementById('remove' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "moveCursorRight",
        bindKey: {win: 'Right', mac: 'Right'},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            if(editor.getCursorPosition().row == eodRow &&
               editor.getCursorPosition().column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateFileStart();
                ne.focus();
              }
            }
            editor.navigateRight(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorLeft",
        bindKey: {win: 'Left', mac: 'Left'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0 &&
               editor.getCursorPosition().column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateFileEnd();
                pe.focus();
              }
            }
            editor.navigateLeft(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorUp",
        bindKey: {win: 'Up', mac: 'Up'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateTo(pe.getSession().getDocument().getLength()-1, editor.getCursorPosition().column);
                pe.focus();
              }
            }
            editor.navigateUp(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorDown",
        bindKey: {win: 'Down', mac: 'Down'},
        exec: function(editor) {
            if(editor.getCursorPosition().row + 1 == editor.getSession().getDocument().getLength()) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateTo(0, editor.getCursorPosition().column);
                ne.focus();
              }
            }
            editor.navigateDown(1);
        }
    })
    editor.commands.addCommand({
        name: "mergeBefore",
        bindKey: {win: "Shift-Backspace|Backspace", mac: "Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"},
        exec: function(editor) {
            var curPos = editor.getCursorPosition();
            if(curPos.row == 0 && curPos.column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                console.log("merge with previous!");
                var text = editor.getSession().getDocument().getValue();
                pe.focus();
                pe.gotoLine(pe.getSession().getDocument().getLength());
                pe.navigateLineEnd();
                var newCurPos = pe.getCursorPosition();
                pe.insert('\n'+ text);
                pe.navigateTo(newCurPos.row+1, 0);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("left");
            }
        }
    })
    editor.commands.addCommand({
        name: "mergeAfter",
        bindKey: {win: "Delete", mac: "Delete|Ctrl-D|Shift-Delete"},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            var curPos = editor.getCursorPosition();
            if(curPos.row == eodRow && curPos.column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                console.log("merge with after!");
                var text = editor.getSession().getDocument().getValue();
                ne.focus();
                ne.navigateTo(0, 0);
                ne.insert(text+'\n', 1);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("right");
            }
        }
    })
    editor.commands.addCommand({
        name: "saveDoc",
        bindKey: {win: "Ctrl-S", mac: "Cmd-S"},
        exec: function(editor) {
            saveDoc(doc, compilers);
        }
    })
    editor.commands.addCommand({
        name: "modeScala",
        bindKey: {win: "Ctrl-Alt-S", mac: "Ctrl-Alt-S"},
        exec: function(editor) {
            console.log("changing mode to scala");
            changeMode(id,'scala');
        }
    })
    editor.commands.addCommand({
        name: "modeMarkdown",
        bindKey: {win: "Ctrl-Alt-M", mac: "Ctrl-Alt-M"},
        exec: function(editor) {
            console.log("changing mode to markdown");
            changeMode(id,'markdown');
        }
    })
    editor.commands.addCommand({
        name: "toggleMode",
        bindKey: {win: "Ctrl-M", mac: "Ctrl-M"},
        exec: function(editor) {
            mode = currentMode(id);
            console.log("changing mode to " + toggledMode(mode));
            changeMode(id, toggledMode(mode));
        }
    })
    //heightUpdateFunction(editor, '#editor'+id);
    return editor;
}
    ;
        compilers.latex.editorToInput = 
function (doc, id) {
  input = {}
  input.code = doc.cells[id].editor.getSession().getValue();
  return input;
};
    ;
        compilers.latex.aggregate = false;
    
        compilers.heading1 = {};
        compilers.heading1.hideAfterCompile = true;
        compilers.heading1.editor = 
function(id,content) {
    $("#editor"+id).empty();
    var editor = ace.edit("editor"+id);
    editor.setOptions({
      maxLines: Infinity,
      enableBasicAutocompletion: true,
      enableSnippets: true,
      enableLiveAutocompletion: true
    });
    editor.setTheme("ace/theme/" + doc.aceTheme);
    editor.getSession().setMode("ace/mode/text");
    editor.getSession().setUseWrapMode(true);
    editor.getSession().setWrapLimitRange(null, null);
    var contentToAdd = ""
    if(content=="") contentToAdd = 'Heading';
    else contentToAdd = content;
    editor.renderer.setScrollMargin(10, 10, 0, 0);
    //editor.renderer.setPadding(20);
    editor.getSession().setValue(contentToAdd, 1);
    editor.focus();
    editor.navigateFileEnd();
    editor.setBehavioursEnabled(true);
    editor.setWrapBehavioursEnabled(true);
    editor.setShowFoldWidgets(true);
    editor.setHighlightActiveLine(false);
    editor.setShowPrintMargin(false);
    editor.setAutoScrollEditorIntoView(true);
    editor.renderer.setShowGutter(true);
    editor.on('change', function () {
        //heightUpdateFunction(editor, '#editor'+id);
    });
    if(!doc.allowExecution) editor.setReadOnly(true);

    editor.commands.addCommand({
        name: "runCode",
        bindKey: {win: "Ctrl-Enter", mac: "Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById("runCode"+id).click();
        }
    })
    editor.getSession().on('change', function() {
      var mode = currentMode(id);
      if(mode=='markdown' || mode=='html') {
        //document.getElementById("runCode"+id).click();
      }
    });
    editor.commands.addCommand({
        name: "addCellBelow",
        bindKey: {win: "Shift-Enter", mac: "Shift-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.focus();
              ne.insert(text,1);
              ne.navigateTo(0, 0);
              newId = nextCellId(id);
              changeMode(newId,oldMode)
              console.log("changing " + newId + " to " + oldMode);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "injectEmptyCell",
        bindKey: {win: "Shift-Ctrl-Enter", mac: "Shift-Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.insert(text,1);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
            if (!(ne.getValue().trim() === "")) document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            newId = nextCellId(id);
            changeMode(newId,toggledMode(oldMode));
            if(typeof(ne)!='undefined') {
              ne.focus();
              ne.navigateTo(0, 0);
            }
        }
    })
    editor.commands.addCommand({
        name: "deleteCell",
        bindKey: {win: "Shift-Del", mac: "Shift-Del"},
        exec: function(editor) {
            document.getElementById('remove' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "moveCursorRight",
        bindKey: {win: 'Right', mac: 'Right'},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            if(editor.getCursorPosition().row == eodRow &&
               editor.getCursorPosition().column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateFileStart();
                ne.focus();
              }
            }
            editor.navigateRight(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorLeft",
        bindKey: {win: 'Left', mac: 'Left'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0 &&
               editor.getCursorPosition().column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateFileEnd();
                pe.focus();
              }
            }
            editor.navigateLeft(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorUp",
        bindKey: {win: 'Up', mac: 'Up'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateTo(pe.getSession().getDocument().getLength()-1, editor.getCursorPosition().column);
                pe.focus();
              }
            }
            editor.navigateUp(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorDown",
        bindKey: {win: 'Down', mac: 'Down'},
        exec: function(editor) {
            if(editor.getCursorPosition().row + 1 == editor.getSession().getDocument().getLength()) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateTo(0, editor.getCursorPosition().column);
                ne.focus();
              }
            }
            editor.navigateDown(1);
        }
    })
    editor.commands.addCommand({
        name: "mergeBefore",
        bindKey: {win: "Shift-Backspace|Backspace", mac: "Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"},
        exec: function(editor) {
            var curPos = editor.getCursorPosition();
            if(curPos.row == 0 && curPos.column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                console.log("merge with previous!");
                var text = editor.getSession().getDocument().getValue();
                pe.focus();
                pe.gotoLine(pe.getSession().getDocument().getLength());
                pe.navigateLineEnd();
                var newCurPos = pe.getCursorPosition();
                pe.insert('\n'+ text);
                pe.navigateTo(newCurPos.row+1, 0);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("left");
            }
        }
    })
    editor.commands.addCommand({
        name: "mergeAfter",
        bindKey: {win: "Delete", mac: "Delete|Ctrl-D|Shift-Delete"},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            var curPos = editor.getCursorPosition();
            if(curPos.row == eodRow && curPos.column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                console.log("merge with after!");
                var text = editor.getSession().getDocument().getValue();
                ne.focus();
                ne.navigateTo(0, 0);
                ne.insert(text+'\n', 1);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("right");
            }
        }
    })
    editor.commands.addCommand({
        name: "saveDoc",
        bindKey: {win: "Ctrl-S", mac: "Cmd-S"},
        exec: function(editor) {
            saveDoc(doc, compilers);
        }
    })
    editor.commands.addCommand({
        name: "modeScala",
        bindKey: {win: "Ctrl-Alt-S", mac: "Ctrl-Alt-S"},
        exec: function(editor) {
            console.log("changing mode to scala");
            changeMode(id,'scala');
        }
    })
    editor.commands.addCommand({
        name: "modeMarkdown",
        bindKey: {win: "Ctrl-Alt-M", mac: "Ctrl-Alt-M"},
        exec: function(editor) {
            console.log("changing mode to markdown");
            changeMode(id,'markdown');
        }
    })
    editor.commands.addCommand({
        name: "toggleMode",
        bindKey: {win: "Ctrl-M", mac: "Ctrl-M"},
        exec: function(editor) {
            mode = currentMode(id);
            console.log("changing mode to " + toggledMode(mode));
            changeMode(id, toggledMode(mode));
        }
    })
    //heightUpdateFunction(editor, '#editor'+id);
    return editor;
}
    ;
        compilers.heading1.editorToInput = 
function (doc, id) {
  input = {}
  input.code = doc.cells[id].editor.getSession().getValue();
  return input;
};
    ;
        compilers.heading1.aggregate = false;
    
        compilers.heading2 = {};
        compilers.heading2.hideAfterCompile = true;
        compilers.heading2.editor = 
function(id,content) {
    $("#editor"+id).empty();
    var editor = ace.edit("editor"+id);
    editor.setOptions({
      maxLines: Infinity,
      enableBasicAutocompletion: true,
      enableSnippets: true,
      enableLiveAutocompletion: true
    });
    editor.setTheme("ace/theme/" + doc.aceTheme);
    editor.getSession().setMode("ace/mode/text");
    editor.getSession().setUseWrapMode(true);
    editor.getSession().setWrapLimitRange(null, null);
    var contentToAdd = ""
    if(content=="") contentToAdd = 'Heading';
    else contentToAdd = content;
    editor.renderer.setScrollMargin(10, 10, 0, 0);
    //editor.renderer.setPadding(20);
    editor.getSession().setValue(contentToAdd, 1);
    editor.focus();
    editor.navigateFileEnd();
    editor.setBehavioursEnabled(true);
    editor.setWrapBehavioursEnabled(true);
    editor.setShowFoldWidgets(true);
    editor.setHighlightActiveLine(false);
    editor.setShowPrintMargin(false);
    editor.setAutoScrollEditorIntoView(true);
    editor.renderer.setShowGutter(true);
    editor.on('change', function () {
        //heightUpdateFunction(editor, '#editor'+id);
    });
    if(!doc.allowExecution) editor.setReadOnly(true);

    editor.commands.addCommand({
        name: "runCode",
        bindKey: {win: "Ctrl-Enter", mac: "Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById("runCode"+id).click();
        }
    })
    editor.getSession().on('change', function() {
      var mode = currentMode(id);
      if(mode=='markdown' || mode=='html') {
        //document.getElementById("runCode"+id).click();
      }
    });
    editor.commands.addCommand({
        name: "addCellBelow",
        bindKey: {win: "Shift-Enter", mac: "Shift-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.focus();
              ne.insert(text,1);
              ne.navigateTo(0, 0);
              newId = nextCellId(id);
              changeMode(newId,oldMode)
              console.log("changing " + newId + " to " + oldMode);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "injectEmptyCell",
        bindKey: {win: "Shift-Ctrl-Enter", mac: "Shift-Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.insert(text,1);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
            if (!(ne.getValue().trim() === "")) document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            newId = nextCellId(id);
            changeMode(newId,toggledMode(oldMode));
            if(typeof(ne)!='undefined') {
              ne.focus();
              ne.navigateTo(0, 0);
            }
        }
    })
    editor.commands.addCommand({
        name: "deleteCell",
        bindKey: {win: "Shift-Del", mac: "Shift-Del"},
        exec: function(editor) {
            document.getElementById('remove' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "moveCursorRight",
        bindKey: {win: 'Right', mac: 'Right'},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            if(editor.getCursorPosition().row == eodRow &&
               editor.getCursorPosition().column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateFileStart();
                ne.focus();
              }
            }
            editor.navigateRight(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorLeft",
        bindKey: {win: 'Left', mac: 'Left'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0 &&
               editor.getCursorPosition().column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateFileEnd();
                pe.focus();
              }
            }
            editor.navigateLeft(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorUp",
        bindKey: {win: 'Up', mac: 'Up'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateTo(pe.getSession().getDocument().getLength()-1, editor.getCursorPosition().column);
                pe.focus();
              }
            }
            editor.navigateUp(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorDown",
        bindKey: {win: 'Down', mac: 'Down'},
        exec: function(editor) {
            if(editor.getCursorPosition().row + 1 == editor.getSession().getDocument().getLength()) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateTo(0, editor.getCursorPosition().column);
                ne.focus();
              }
            }
            editor.navigateDown(1);
        }
    })
    editor.commands.addCommand({
        name: "mergeBefore",
        bindKey: {win: "Shift-Backspace|Backspace", mac: "Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"},
        exec: function(editor) {
            var curPos = editor.getCursorPosition();
            if(curPos.row == 0 && curPos.column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                console.log("merge with previous!");
                var text = editor.getSession().getDocument().getValue();
                pe.focus();
                pe.gotoLine(pe.getSession().getDocument().getLength());
                pe.navigateLineEnd();
                var newCurPos = pe.getCursorPosition();
                pe.insert('\n'+ text);
                pe.navigateTo(newCurPos.row+1, 0);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("left");
            }
        }
    })
    editor.commands.addCommand({
        name: "mergeAfter",
        bindKey: {win: "Delete", mac: "Delete|Ctrl-D|Shift-Delete"},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            var curPos = editor.getCursorPosition();
            if(curPos.row == eodRow && curPos.column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                console.log("merge with after!");
                var text = editor.getSession().getDocument().getValue();
                ne.focus();
                ne.navigateTo(0, 0);
                ne.insert(text+'\n', 1);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("right");
            }
        }
    })
    editor.commands.addCommand({
        name: "saveDoc",
        bindKey: {win: "Ctrl-S", mac: "Cmd-S"},
        exec: function(editor) {
            saveDoc(doc, compilers);
        }
    })
    editor.commands.addCommand({
        name: "modeScala",
        bindKey: {win: "Ctrl-Alt-S", mac: "Ctrl-Alt-S"},
        exec: function(editor) {
            console.log("changing mode to scala");
            changeMode(id,'scala');
        }
    })
    editor.commands.addCommand({
        name: "modeMarkdown",
        bindKey: {win: "Ctrl-Alt-M", mac: "Ctrl-Alt-M"},
        exec: function(editor) {
            console.log("changing mode to markdown");
            changeMode(id,'markdown');
        }
    })
    editor.commands.addCommand({
        name: "toggleMode",
        bindKey: {win: "Ctrl-M", mac: "Ctrl-M"},
        exec: function(editor) {
            mode = currentMode(id);
            console.log("changing mode to " + toggledMode(mode));
            changeMode(id, toggledMode(mode));
        }
    })
    //heightUpdateFunction(editor, '#editor'+id);
    return editor;
}
    ;
        compilers.heading2.editorToInput = 
function (doc, id) {
  input = {}
  input.code = doc.cells[id].editor.getSession().getValue();
  return input;
};
    ;
        compilers.heading2.aggregate = false;
    
        compilers.heading3 = {};
        compilers.heading3.hideAfterCompile = true;
        compilers.heading3.editor = 
function(id,content) {
    $("#editor"+id).empty();
    var editor = ace.edit("editor"+id);
    editor.setOptions({
      maxLines: Infinity,
      enableBasicAutocompletion: true,
      enableSnippets: true,
      enableLiveAutocompletion: true
    });
    editor.setTheme("ace/theme/" + doc.aceTheme);
    editor.getSession().setMode("ace/mode/text");
    editor.getSession().setUseWrapMode(true);
    editor.getSession().setWrapLimitRange(null, null);
    var contentToAdd = ""
    if(content=="") contentToAdd = 'Heading';
    else contentToAdd = content;
    editor.renderer.setScrollMargin(10, 10, 0, 0);
    //editor.renderer.setPadding(20);
    editor.getSession().setValue(contentToAdd, 1);
    editor.focus();
    editor.navigateFileEnd();
    editor.setBehavioursEnabled(true);
    editor.setWrapBehavioursEnabled(true);
    editor.setShowFoldWidgets(true);
    editor.setHighlightActiveLine(false);
    editor.setShowPrintMargin(false);
    editor.setAutoScrollEditorIntoView(true);
    editor.renderer.setShowGutter(true);
    editor.on('change', function () {
        //heightUpdateFunction(editor, '#editor'+id);
    });
    if(!doc.allowExecution) editor.setReadOnly(true);

    editor.commands.addCommand({
        name: "runCode",
        bindKey: {win: "Ctrl-Enter", mac: "Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById("runCode"+id).click();
        }
    })
    editor.getSession().on('change', function() {
      var mode = currentMode(id);
      if(mode=='markdown' || mode=='html') {
        //document.getElementById("runCode"+id).click();
      }
    });
    editor.commands.addCommand({
        name: "addCellBelow",
        bindKey: {win: "Shift-Enter", mac: "Shift-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.focus();
              ne.insert(text,1);
              ne.navigateTo(0, 0);
              newId = nextCellId(id);
              changeMode(newId,oldMode)
              console.log("changing " + newId + " to " + oldMode);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "injectEmptyCell",
        bindKey: {win: "Shift-Ctrl-Enter", mac: "Shift-Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.insert(text,1);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
            if (!(ne.getValue().trim() === "")) document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            newId = nextCellId(id);
            changeMode(newId,toggledMode(oldMode));
            if(typeof(ne)!='undefined') {
              ne.focus();
              ne.navigateTo(0, 0);
            }
        }
    })
    editor.commands.addCommand({
        name: "deleteCell",
        bindKey: {win: "Shift-Del", mac: "Shift-Del"},
        exec: function(editor) {
            document.getElementById('remove' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "moveCursorRight",
        bindKey: {win: 'Right', mac: 'Right'},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            if(editor.getCursorPosition().row == eodRow &&
               editor.getCursorPosition().column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateFileStart();
                ne.focus();
              }
            }
            editor.navigateRight(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorLeft",
        bindKey: {win: 'Left', mac: 'Left'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0 &&
               editor.getCursorPosition().column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateFileEnd();
                pe.focus();
              }
            }
            editor.navigateLeft(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorUp",
        bindKey: {win: 'Up', mac: 'Up'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateTo(pe.getSession().getDocument().getLength()-1, editor.getCursorPosition().column);
                pe.focus();
              }
            }
            editor.navigateUp(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorDown",
        bindKey: {win: 'Down', mac: 'Down'},
        exec: function(editor) {
            if(editor.getCursorPosition().row + 1 == editor.getSession().getDocument().getLength()) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateTo(0, editor.getCursorPosition().column);
                ne.focus();
              }
            }
            editor.navigateDown(1);
        }
    })
    editor.commands.addCommand({
        name: "mergeBefore",
        bindKey: {win: "Shift-Backspace|Backspace", mac: "Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"},
        exec: function(editor) {
            var curPos = editor.getCursorPosition();
            if(curPos.row == 0 && curPos.column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                console.log("merge with previous!");
                var text = editor.getSession().getDocument().getValue();
                pe.focus();
                pe.gotoLine(pe.getSession().getDocument().getLength());
                pe.navigateLineEnd();
                var newCurPos = pe.getCursorPosition();
                pe.insert('\n'+ text);
                pe.navigateTo(newCurPos.row+1, 0);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("left");
            }
        }
    })
    editor.commands.addCommand({
        name: "mergeAfter",
        bindKey: {win: "Delete", mac: "Delete|Ctrl-D|Shift-Delete"},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            var curPos = editor.getCursorPosition();
            if(curPos.row == eodRow && curPos.column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                console.log("merge with after!");
                var text = editor.getSession().getDocument().getValue();
                ne.focus();
                ne.navigateTo(0, 0);
                ne.insert(text+'\n', 1);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("right");
            }
        }
    })
    editor.commands.addCommand({
        name: "saveDoc",
        bindKey: {win: "Ctrl-S", mac: "Cmd-S"},
        exec: function(editor) {
            saveDoc(doc, compilers);
        }
    })
    editor.commands.addCommand({
        name: "modeScala",
        bindKey: {win: "Ctrl-Alt-S", mac: "Ctrl-Alt-S"},
        exec: function(editor) {
            console.log("changing mode to scala");
            changeMode(id,'scala');
        }
    })
    editor.commands.addCommand({
        name: "modeMarkdown",
        bindKey: {win: "Ctrl-Alt-M", mac: "Ctrl-Alt-M"},
        exec: function(editor) {
            console.log("changing mode to markdown");
            changeMode(id,'markdown');
        }
    })
    editor.commands.addCommand({
        name: "toggleMode",
        bindKey: {win: "Ctrl-M", mac: "Ctrl-M"},
        exec: function(editor) {
            mode = currentMode(id);
            console.log("changing mode to " + toggledMode(mode));
            changeMode(id, toggledMode(mode));
        }
    })
    //heightUpdateFunction(editor, '#editor'+id);
    return editor;
}
    ;
        compilers.heading3.editorToInput = 
function (doc, id) {
  input = {}
  input.code = doc.cells[id].editor.getSession().getValue();
  return input;
};
    ;
        compilers.heading3.aggregate = false;
    
        compilers.heading4 = {};
        compilers.heading4.hideAfterCompile = true;
        compilers.heading4.editor = 
function(id,content) {
    $("#editor"+id).empty();
    var editor = ace.edit("editor"+id);
    editor.setOptions({
      maxLines: Infinity,
      enableBasicAutocompletion: true,
      enableSnippets: true,
      enableLiveAutocompletion: true
    });
    editor.setTheme("ace/theme/" + doc.aceTheme);
    editor.getSession().setMode("ace/mode/text");
    editor.getSession().setUseWrapMode(true);
    editor.getSession().setWrapLimitRange(null, null);
    var contentToAdd = ""
    if(content=="") contentToAdd = 'Heading';
    else contentToAdd = content;
    editor.renderer.setScrollMargin(10, 10, 0, 0);
    //editor.renderer.setPadding(20);
    editor.getSession().setValue(contentToAdd, 1);
    editor.focus();
    editor.navigateFileEnd();
    editor.setBehavioursEnabled(true);
    editor.setWrapBehavioursEnabled(true);
    editor.setShowFoldWidgets(true);
    editor.setHighlightActiveLine(false);
    editor.setShowPrintMargin(false);
    editor.setAutoScrollEditorIntoView(true);
    editor.renderer.setShowGutter(true);
    editor.on('change', function () {
        //heightUpdateFunction(editor, '#editor'+id);
    });
    if(!doc.allowExecution) editor.setReadOnly(true);

    editor.commands.addCommand({
        name: "runCode",
        bindKey: {win: "Ctrl-Enter", mac: "Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById("runCode"+id).click();
        }
    })
    editor.getSession().on('change', function() {
      var mode = currentMode(id);
      if(mode=='markdown' || mode=='html') {
        //document.getElementById("runCode"+id).click();
      }
    });
    editor.commands.addCommand({
        name: "addCellBelow",
        bindKey: {win: "Shift-Enter", mac: "Shift-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.focus();
              ne.insert(text,1);
              ne.navigateTo(0, 0);
              newId = nextCellId(id);
              changeMode(newId,oldMode)
              console.log("changing " + newId + " to " + oldMode);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "injectEmptyCell",
        bindKey: {win: "Shift-Ctrl-Enter", mac: "Shift-Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.insert(text,1);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
            if (!(ne.getValue().trim() === "")) document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            newId = nextCellId(id);
            changeMode(newId,toggledMode(oldMode));
            if(typeof(ne)!='undefined') {
              ne.focus();
              ne.navigateTo(0, 0);
            }
        }
    })
    editor.commands.addCommand({
        name: "deleteCell",
        bindKey: {win: "Shift-Del", mac: "Shift-Del"},
        exec: function(editor) {
            document.getElementById('remove' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "moveCursorRight",
        bindKey: {win: 'Right', mac: 'Right'},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            if(editor.getCursorPosition().row == eodRow &&
               editor.getCursorPosition().column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateFileStart();
                ne.focus();
              }
            }
            editor.navigateRight(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorLeft",
        bindKey: {win: 'Left', mac: 'Left'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0 &&
               editor.getCursorPosition().column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateFileEnd();
                pe.focus();
              }
            }
            editor.navigateLeft(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorUp",
        bindKey: {win: 'Up', mac: 'Up'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateTo(pe.getSession().getDocument().getLength()-1, editor.getCursorPosition().column);
                pe.focus();
              }
            }
            editor.navigateUp(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorDown",
        bindKey: {win: 'Down', mac: 'Down'},
        exec: function(editor) {
            if(editor.getCursorPosition().row + 1 == editor.getSession().getDocument().getLength()) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateTo(0, editor.getCursorPosition().column);
                ne.focus();
              }
            }
            editor.navigateDown(1);
        }
    })
    editor.commands.addCommand({
        name: "mergeBefore",
        bindKey: {win: "Shift-Backspace|Backspace", mac: "Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"},
        exec: function(editor) {
            var curPos = editor.getCursorPosition();
            if(curPos.row == 0 && curPos.column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                console.log("merge with previous!");
                var text = editor.getSession().getDocument().getValue();
                pe.focus();
                pe.gotoLine(pe.getSession().getDocument().getLength());
                pe.navigateLineEnd();
                var newCurPos = pe.getCursorPosition();
                pe.insert('\n'+ text);
                pe.navigateTo(newCurPos.row+1, 0);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("left");
            }
        }
    })
    editor.commands.addCommand({
        name: "mergeAfter",
        bindKey: {win: "Delete", mac: "Delete|Ctrl-D|Shift-Delete"},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            var curPos = editor.getCursorPosition();
            if(curPos.row == eodRow && curPos.column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                console.log("merge with after!");
                var text = editor.getSession().getDocument().getValue();
                ne.focus();
                ne.navigateTo(0, 0);
                ne.insert(text+'\n', 1);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("right");
            }
        }
    })
    editor.commands.addCommand({
        name: "saveDoc",
        bindKey: {win: "Ctrl-S", mac: "Cmd-S"},
        exec: function(editor) {
            saveDoc(doc, compilers);
        }
    })
    editor.commands.addCommand({
        name: "modeScala",
        bindKey: {win: "Ctrl-Alt-S", mac: "Ctrl-Alt-S"},
        exec: function(editor) {
            console.log("changing mode to scala");
            changeMode(id,'scala');
        }
    })
    editor.commands.addCommand({
        name: "modeMarkdown",
        bindKey: {win: "Ctrl-Alt-M", mac: "Ctrl-Alt-M"},
        exec: function(editor) {
            console.log("changing mode to markdown");
            changeMode(id,'markdown');
        }
    })
    editor.commands.addCommand({
        name: "toggleMode",
        bindKey: {win: "Ctrl-M", mac: "Ctrl-M"},
        exec: function(editor) {
            mode = currentMode(id);
            console.log("changing mode to " + toggledMode(mode));
            changeMode(id, toggledMode(mode));
        }
    })
    //heightUpdateFunction(editor, '#editor'+id);
    return editor;
}
    ;
        compilers.heading4.editorToInput = 
function (doc, id) {
  input = {}
  input.code = doc.cells[id].editor.getSession().getValue();
  return input;
};
    ;
        compilers.heading4.aggregate = false;
    
        compilers.heading5 = {};
        compilers.heading5.hideAfterCompile = true;
        compilers.heading5.editor = 
function(id,content) {
    $("#editor"+id).empty();
    var editor = ace.edit("editor"+id);
    editor.setOptions({
      maxLines: Infinity,
      enableBasicAutocompletion: true,
      enableSnippets: true,
      enableLiveAutocompletion: true
    });
    editor.setTheme("ace/theme/" + doc.aceTheme);
    editor.getSession().setMode("ace/mode/text");
    editor.getSession().setUseWrapMode(true);
    editor.getSession().setWrapLimitRange(null, null);
    var contentToAdd = ""
    if(content=="") contentToAdd = 'Heading';
    else contentToAdd = content;
    editor.renderer.setScrollMargin(10, 10, 0, 0);
    //editor.renderer.setPadding(20);
    editor.getSession().setValue(contentToAdd, 1);
    editor.focus();
    editor.navigateFileEnd();
    editor.setBehavioursEnabled(true);
    editor.setWrapBehavioursEnabled(true);
    editor.setShowFoldWidgets(true);
    editor.setHighlightActiveLine(false);
    editor.setShowPrintMargin(false);
    editor.setAutoScrollEditorIntoView(true);
    editor.renderer.setShowGutter(true);
    editor.on('change', function () {
        //heightUpdateFunction(editor, '#editor'+id);
    });
    if(!doc.allowExecution) editor.setReadOnly(true);

    editor.commands.addCommand({
        name: "runCode",
        bindKey: {win: "Ctrl-Enter", mac: "Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById("runCode"+id).click();
        }
    })
    editor.getSession().on('change', function() {
      var mode = currentMode(id);
      if(mode=='markdown' || mode=='html') {
        //document.getElementById("runCode"+id).click();
      }
    });
    editor.commands.addCommand({
        name: "addCellBelow",
        bindKey: {win: "Shift-Enter", mac: "Shift-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.focus();
              ne.insert(text,1);
              ne.navigateTo(0, 0);
              newId = nextCellId(id);
              changeMode(newId,oldMode)
              console.log("changing " + newId + " to " + oldMode);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "injectEmptyCell",
        bindKey: {win: "Shift-Ctrl-Enter", mac: "Shift-Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.insert(text,1);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
            if (!(ne.getValue().trim() === "")) document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            newId = nextCellId(id);
            changeMode(newId,toggledMode(oldMode));
            if(typeof(ne)!='undefined') {
              ne.focus();
              ne.navigateTo(0, 0);
            }
        }
    })
    editor.commands.addCommand({
        name: "deleteCell",
        bindKey: {win: "Shift-Del", mac: "Shift-Del"},
        exec: function(editor) {
            document.getElementById('remove' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "moveCursorRight",
        bindKey: {win: 'Right', mac: 'Right'},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            if(editor.getCursorPosition().row == eodRow &&
               editor.getCursorPosition().column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateFileStart();
                ne.focus();
              }
            }
            editor.navigateRight(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorLeft",
        bindKey: {win: 'Left', mac: 'Left'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0 &&
               editor.getCursorPosition().column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateFileEnd();
                pe.focus();
              }
            }
            editor.navigateLeft(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorUp",
        bindKey: {win: 'Up', mac: 'Up'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateTo(pe.getSession().getDocument().getLength()-1, editor.getCursorPosition().column);
                pe.focus();
              }
            }
            editor.navigateUp(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorDown",
        bindKey: {win: 'Down', mac: 'Down'},
        exec: function(editor) {
            if(editor.getCursorPosition().row + 1 == editor.getSession().getDocument().getLength()) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateTo(0, editor.getCursorPosition().column);
                ne.focus();
              }
            }
            editor.navigateDown(1);
        }
    })
    editor.commands.addCommand({
        name: "mergeBefore",
        bindKey: {win: "Shift-Backspace|Backspace", mac: "Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"},
        exec: function(editor) {
            var curPos = editor.getCursorPosition();
            if(curPos.row == 0 && curPos.column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                console.log("merge with previous!");
                var text = editor.getSession().getDocument().getValue();
                pe.focus();
                pe.gotoLine(pe.getSession().getDocument().getLength());
                pe.navigateLineEnd();
                var newCurPos = pe.getCursorPosition();
                pe.insert('\n'+ text);
                pe.navigateTo(newCurPos.row+1, 0);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("left");
            }
        }
    })
    editor.commands.addCommand({
        name: "mergeAfter",
        bindKey: {win: "Delete", mac: "Delete|Ctrl-D|Shift-Delete"},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            var curPos = editor.getCursorPosition();
            if(curPos.row == eodRow && curPos.column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                console.log("merge with after!");
                var text = editor.getSession().getDocument().getValue();
                ne.focus();
                ne.navigateTo(0, 0);
                ne.insert(text+'\n', 1);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("right");
            }
        }
    })
    editor.commands.addCommand({
        name: "saveDoc",
        bindKey: {win: "Ctrl-S", mac: "Cmd-S"},
        exec: function(editor) {
            saveDoc(doc, compilers);
        }
    })
    editor.commands.addCommand({
        name: "modeScala",
        bindKey: {win: "Ctrl-Alt-S", mac: "Ctrl-Alt-S"},
        exec: function(editor) {
            console.log("changing mode to scala");
            changeMode(id,'scala');
        }
    })
    editor.commands.addCommand({
        name: "modeMarkdown",
        bindKey: {win: "Ctrl-Alt-M", mac: "Ctrl-Alt-M"},
        exec: function(editor) {
            console.log("changing mode to markdown");
            changeMode(id,'markdown');
        }
    })
    editor.commands.addCommand({
        name: "toggleMode",
        bindKey: {win: "Ctrl-M", mac: "Ctrl-M"},
        exec: function(editor) {
            mode = currentMode(id);
            console.log("changing mode to " + toggledMode(mode));
            changeMode(id, toggledMode(mode));
        }
    })
    //heightUpdateFunction(editor, '#editor'+id);
    return editor;
}
    ;
        compilers.heading5.editorToInput = 
function (doc, id) {
  input = {}
  input.code = doc.cells[id].editor.getSession().getValue();
  return input;
};
    ;
        compilers.heading5.aggregate = false;
    
        compilers.html = {};
        compilers.html.hideAfterCompile = true;
        compilers.html.editor = 
function(id,content) {
    $("#editor"+id).empty();
    var editor = ace.edit("editor"+id);
    editor.setOptions({
      maxLines: Infinity,
      enableBasicAutocompletion: true,
      enableSnippets: true,
      enableLiveAutocompletion: true
    });
    editor.setTheme("ace/theme/" + doc.aceTheme);
    editor.getSession().setMode("ace/mode/html");
    editor.getSession().setUseWrapMode(true);
    editor.getSession().setWrapLimitRange(null, null);
    var contentToAdd = ""
    if(content=="") contentToAdd = '';
    else contentToAdd = content;
    editor.renderer.setScrollMargin(10, 10, 0, 0);
    //editor.renderer.setPadding(20);
    editor.getSession().setValue(contentToAdd, 1);
    editor.focus();
    editor.navigateFileEnd();
    editor.setBehavioursEnabled(true);
    editor.setWrapBehavioursEnabled(true);
    editor.setShowFoldWidgets(true);
    editor.setHighlightActiveLine(false);
    editor.setShowPrintMargin(false);
    editor.setAutoScrollEditorIntoView(true);
    editor.renderer.setShowGutter(true);
    editor.on('change', function () {
        //heightUpdateFunction(editor, '#editor'+id);
    });
    if(!doc.allowExecution) editor.setReadOnly(true);

    editor.commands.addCommand({
        name: "runCode",
        bindKey: {win: "Ctrl-Enter", mac: "Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById("runCode"+id).click();
        }
    })
    editor.getSession().on('change', function() {
      var mode = currentMode(id);
      if(mode=='markdown' || mode=='html') {
        //document.getElementById("runCode"+id).click();
      }
    });
    editor.commands.addCommand({
        name: "addCellBelow",
        bindKey: {win: "Shift-Enter", mac: "Shift-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.focus();
              ne.insert(text,1);
              ne.navigateTo(0, 0);
              newId = nextCellId(id);
              changeMode(newId,oldMode)
              console.log("changing " + newId + " to " + oldMode);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "injectEmptyCell",
        bindKey: {win: "Shift-Ctrl-Enter", mac: "Shift-Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.insert(text,1);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
            if (!(ne.getValue().trim() === "")) document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            newId = nextCellId(id);
            changeMode(newId,toggledMode(oldMode));
            if(typeof(ne)!='undefined') {
              ne.focus();
              ne.navigateTo(0, 0);
            }
        }
    })
    editor.commands.addCommand({
        name: "deleteCell",
        bindKey: {win: "Shift-Del", mac: "Shift-Del"},
        exec: function(editor) {
            document.getElementById('remove' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "moveCursorRight",
        bindKey: {win: 'Right', mac: 'Right'},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            if(editor.getCursorPosition().row == eodRow &&
               editor.getCursorPosition().column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateFileStart();
                ne.focus();
              }
            }
            editor.navigateRight(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorLeft",
        bindKey: {win: 'Left', mac: 'Left'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0 &&
               editor.getCursorPosition().column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateFileEnd();
                pe.focus();
              }
            }
            editor.navigateLeft(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorUp",
        bindKey: {win: 'Up', mac: 'Up'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateTo(pe.getSession().getDocument().getLength()-1, editor.getCursorPosition().column);
                pe.focus();
              }
            }
            editor.navigateUp(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorDown",
        bindKey: {win: 'Down', mac: 'Down'},
        exec: function(editor) {
            if(editor.getCursorPosition().row + 1 == editor.getSession().getDocument().getLength()) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateTo(0, editor.getCursorPosition().column);
                ne.focus();
              }
            }
            editor.navigateDown(1);
        }
    })
    editor.commands.addCommand({
        name: "mergeBefore",
        bindKey: {win: "Shift-Backspace|Backspace", mac: "Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"},
        exec: function(editor) {
            var curPos = editor.getCursorPosition();
            if(curPos.row == 0 && curPos.column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                console.log("merge with previous!");
                var text = editor.getSession().getDocument().getValue();
                pe.focus();
                pe.gotoLine(pe.getSession().getDocument().getLength());
                pe.navigateLineEnd();
                var newCurPos = pe.getCursorPosition();
                pe.insert('\n'+ text);
                pe.navigateTo(newCurPos.row+1, 0);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("left");
            }
        }
    })
    editor.commands.addCommand({
        name: "mergeAfter",
        bindKey: {win: "Delete", mac: "Delete|Ctrl-D|Shift-Delete"},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            var curPos = editor.getCursorPosition();
            if(curPos.row == eodRow && curPos.column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                console.log("merge with after!");
                var text = editor.getSession().getDocument().getValue();
                ne.focus();
                ne.navigateTo(0, 0);
                ne.insert(text+'\n', 1);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("right");
            }
        }
    })
    editor.commands.addCommand({
        name: "saveDoc",
        bindKey: {win: "Ctrl-S", mac: "Cmd-S"},
        exec: function(editor) {
            saveDoc(doc, compilers);
        }
    })
    editor.commands.addCommand({
        name: "modeScala",
        bindKey: {win: "Ctrl-Alt-S", mac: "Ctrl-Alt-S"},
        exec: function(editor) {
            console.log("changing mode to scala");
            changeMode(id,'scala');
        }
    })
    editor.commands.addCommand({
        name: "modeMarkdown",
        bindKey: {win: "Ctrl-Alt-M", mac: "Ctrl-Alt-M"},
        exec: function(editor) {
            console.log("changing mode to markdown");
            changeMode(id,'markdown');
        }
    })
    editor.commands.addCommand({
        name: "toggleMode",
        bindKey: {win: "Ctrl-M", mac: "Ctrl-M"},
        exec: function(editor) {
            mode = currentMode(id);
            console.log("changing mode to " + toggledMode(mode));
            changeMode(id, toggledMode(mode));
        }
    })
    //heightUpdateFunction(editor, '#editor'+id);
    return editor;
}
    ;
        compilers.html.editorToInput = 
function (doc, id) {
  input = {}
  input.code = doc.cells[id].editor.getSession().getValue();
  return input;
};
    ;
        compilers.html.aggregate = false;
    
        compilers.imageurl = {};
        compilers.imageurl.hideAfterCompile = true;
        compilers.imageurl.editor = 
function(id,content) {
    $("#editor"+id).empty();
    var editor = ace.edit("editor"+id);
    editor.setOptions({
      maxLines: Infinity,
      enableBasicAutocompletion: true,
      enableSnippets: true,
      enableLiveAutocompletion: true
    });
    editor.setTheme("ace/theme/" + doc.aceTheme);
    editor.getSession().setMode("ace/mode/text");
    editor.getSession().setUseWrapMode(true);
    editor.getSession().setWrapLimitRange(null, null);
    var contentToAdd = ""
    if(content=="") contentToAdd = 'URL';
    else contentToAdd = content;
    editor.renderer.setScrollMargin(10, 10, 0, 0);
    //editor.renderer.setPadding(20);
    editor.getSession().setValue(contentToAdd, 1);
    editor.focus();
    editor.navigateFileEnd();
    editor.setBehavioursEnabled(true);
    editor.setWrapBehavioursEnabled(true);
    editor.setShowFoldWidgets(true);
    editor.setHighlightActiveLine(false);
    editor.setShowPrintMargin(false);
    editor.setAutoScrollEditorIntoView(true);
    editor.renderer.setShowGutter(true);
    editor.on('change', function () {
        //heightUpdateFunction(editor, '#editor'+id);
    });
    if(!doc.allowExecution) editor.setReadOnly(true);

    editor.commands.addCommand({
        name: "runCode",
        bindKey: {win: "Ctrl-Enter", mac: "Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById("runCode"+id).click();
        }
    })
    editor.getSession().on('change', function() {
      var mode = currentMode(id);
      if(mode=='markdown' || mode=='html') {
        //document.getElementById("runCode"+id).click();
      }
    });
    editor.commands.addCommand({
        name: "addCellBelow",
        bindKey: {win: "Shift-Enter", mac: "Shift-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.focus();
              ne.insert(text,1);
              ne.navigateTo(0, 0);
              newId = nextCellId(id);
              changeMode(newId,oldMode)
              console.log("changing " + newId + " to " + oldMode);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "injectEmptyCell",
        bindKey: {win: "Shift-Ctrl-Enter", mac: "Shift-Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.insert(text,1);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
            if (!(ne.getValue().trim() === "")) document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            newId = nextCellId(id);
            changeMode(newId,toggledMode(oldMode));
            if(typeof(ne)!='undefined') {
              ne.focus();
              ne.navigateTo(0, 0);
            }
        }
    })
    editor.commands.addCommand({
        name: "deleteCell",
        bindKey: {win: "Shift-Del", mac: "Shift-Del"},
        exec: function(editor) {
            document.getElementById('remove' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "moveCursorRight",
        bindKey: {win: 'Right', mac: 'Right'},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            if(editor.getCursorPosition().row == eodRow &&
               editor.getCursorPosition().column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateFileStart();
                ne.focus();
              }
            }
            editor.navigateRight(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorLeft",
        bindKey: {win: 'Left', mac: 'Left'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0 &&
               editor.getCursorPosition().column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateFileEnd();
                pe.focus();
              }
            }
            editor.navigateLeft(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorUp",
        bindKey: {win: 'Up', mac: 'Up'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateTo(pe.getSession().getDocument().getLength()-1, editor.getCursorPosition().column);
                pe.focus();
              }
            }
            editor.navigateUp(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorDown",
        bindKey: {win: 'Down', mac: 'Down'},
        exec: function(editor) {
            if(editor.getCursorPosition().row + 1 == editor.getSession().getDocument().getLength()) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateTo(0, editor.getCursorPosition().column);
                ne.focus();
              }
            }
            editor.navigateDown(1);
        }
    })
    editor.commands.addCommand({
        name: "mergeBefore",
        bindKey: {win: "Shift-Backspace|Backspace", mac: "Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"},
        exec: function(editor) {
            var curPos = editor.getCursorPosition();
            if(curPos.row == 0 && curPos.column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                console.log("merge with previous!");
                var text = editor.getSession().getDocument().getValue();
                pe.focus();
                pe.gotoLine(pe.getSession().getDocument().getLength());
                pe.navigateLineEnd();
                var newCurPos = pe.getCursorPosition();
                pe.insert('\n'+ text);
                pe.navigateTo(newCurPos.row+1, 0);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("left");
            }
        }
    })
    editor.commands.addCommand({
        name: "mergeAfter",
        bindKey: {win: "Delete", mac: "Delete|Ctrl-D|Shift-Delete"},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            var curPos = editor.getCursorPosition();
            if(curPos.row == eodRow && curPos.column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                console.log("merge with after!");
                var text = editor.getSession().getDocument().getValue();
                ne.focus();
                ne.navigateTo(0, 0);
                ne.insert(text+'\n', 1);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("right");
            }
        }
    })
    editor.commands.addCommand({
        name: "saveDoc",
        bindKey: {win: "Ctrl-S", mac: "Cmd-S"},
        exec: function(editor) {
            saveDoc(doc, compilers);
        }
    })
    editor.commands.addCommand({
        name: "modeScala",
        bindKey: {win: "Ctrl-Alt-S", mac: "Ctrl-Alt-S"},
        exec: function(editor) {
            console.log("changing mode to scala");
            changeMode(id,'scala');
        }
    })
    editor.commands.addCommand({
        name: "modeMarkdown",
        bindKey: {win: "Ctrl-Alt-M", mac: "Ctrl-Alt-M"},
        exec: function(editor) {
            console.log("changing mode to markdown");
            changeMode(id,'markdown');
        }
    })
    editor.commands.addCommand({
        name: "toggleMode",
        bindKey: {win: "Ctrl-M", mac: "Ctrl-M"},
        exec: function(editor) {
            mode = currentMode(id);
            console.log("changing mode to " + toggledMode(mode));
            changeMode(id, toggledMode(mode));
        }
    })
    //heightUpdateFunction(editor, '#editor'+id);
    return editor;
}
    ;
        compilers.imageurl.editorToInput = 
function (doc, id) {
  input = {}
  input.code = doc.cells[id].editor.getSession().getValue();
  return input;
};
    ;
        compilers.imageurl.aggregate = false;
    
        compilers.google_viewer = {};
        compilers.google_viewer.hideAfterCompile = true;
        compilers.google_viewer.editor = 
function(id,content) {
    $("#editor"+id).empty();
    var editor = ace.edit("editor"+id);
    editor.setOptions({
      maxLines: Infinity,
      enableBasicAutocompletion: true,
      enableSnippets: true,
      enableLiveAutocompletion: true
    });
    editor.setTheme("ace/theme/" + doc.aceTheme);
    editor.getSession().setMode("ace/mode/text");
    editor.getSession().setUseWrapMode(true);
    editor.getSession().setWrapLimitRange(null, null);
    var contentToAdd = ""
    if(content=="") contentToAdd = 'URL';
    else contentToAdd = content;
    editor.renderer.setScrollMargin(10, 10, 0, 0);
    //editor.renderer.setPadding(20);
    editor.getSession().setValue(contentToAdd, 1);
    editor.focus();
    editor.navigateFileEnd();
    editor.setBehavioursEnabled(true);
    editor.setWrapBehavioursEnabled(true);
    editor.setShowFoldWidgets(true);
    editor.setHighlightActiveLine(false);
    editor.setShowPrintMargin(false);
    editor.setAutoScrollEditorIntoView(true);
    editor.renderer.setShowGutter(true);
    editor.on('change', function () {
        //heightUpdateFunction(editor, '#editor'+id);
    });
    if(!doc.allowExecution) editor.setReadOnly(true);

    editor.commands.addCommand({
        name: "runCode",
        bindKey: {win: "Ctrl-Enter", mac: "Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById("runCode"+id).click();
        }
    })
    editor.getSession().on('change', function() {
      var mode = currentMode(id);
      if(mode=='markdown' || mode=='html') {
        //document.getElementById("runCode"+id).click();
      }
    });
    editor.commands.addCommand({
        name: "addCellBelow",
        bindKey: {win: "Shift-Enter", mac: "Shift-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.focus();
              ne.insert(text,1);
              ne.navigateTo(0, 0);
              newId = nextCellId(id);
              changeMode(newId,oldMode)
              console.log("changing " + newId + " to " + oldMode);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "injectEmptyCell",
        bindKey: {win: "Shift-Ctrl-Enter", mac: "Shift-Ctrl-Enter"},
        exec: function(editor) {
            document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            oldMode=currentMode(id);
            if(typeof(ne)!='undefined') {
              editor.getSelection().selectFileEnd();
              var text = editor.getCopyText();
              editor.remove('right');
              console.log("splitting a cell!");
              ne.insert(text,1);
            }
            if (oldMode == 'markdown') document.getElementById('runCode' + id).click();
            if (!(ne.getValue().trim() === "")) document.getElementById('addBelow' + id).click();
            ne=nextEditor(doc,id);
            newId = nextCellId(id);
            changeMode(newId,toggledMode(oldMode));
            if(typeof(ne)!='undefined') {
              ne.focus();
              ne.navigateTo(0, 0);
            }
        }
    })
    editor.commands.addCommand({
        name: "deleteCell",
        bindKey: {win: "Shift-Del", mac: "Shift-Del"},
        exec: function(editor) {
            document.getElementById('remove' + id).click();
        }
    })
    editor.commands.addCommand({
        name: "moveCursorRight",
        bindKey: {win: 'Right', mac: 'Right'},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            if(editor.getCursorPosition().row == eodRow &&
               editor.getCursorPosition().column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateFileStart();
                ne.focus();
              }
            }
            editor.navigateRight(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorLeft",
        bindKey: {win: 'Left', mac: 'Left'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0 &&
               editor.getCursorPosition().column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateFileEnd();
                pe.focus();
              }
            }
            editor.navigateLeft(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorUp",
        bindKey: {win: 'Up', mac: 'Up'},
        exec: function(editor) {
            if(editor.getCursorPosition().row == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                pe.navigateTo(pe.getSession().getDocument().getLength()-1, editor.getCursorPosition().column);
                pe.focus();
              }
            }
            editor.navigateUp(1);
        }
    })
    editor.commands.addCommand({
        name: "moveCursorDown",
        bindKey: {win: 'Down', mac: 'Down'},
        exec: function(editor) {
            if(editor.getCursorPosition().row + 1 == editor.getSession().getDocument().getLength()) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                ne.navigateTo(0, editor.getCursorPosition().column);
                ne.focus();
              }
            }
            editor.navigateDown(1);
        }
    })
    editor.commands.addCommand({
        name: "mergeBefore",
        bindKey: {win: "Shift-Backspace|Backspace", mac: "Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"},
        exec: function(editor) {
            var curPos = editor.getCursorPosition();
            if(curPos.row == 0 && curPos.column == 0) {
              pe=prevEditor(doc,id);
              if(typeof(pe)!='undefined') {
                console.log("merge with previous!");
                var text = editor.getSession().getDocument().getValue();
                pe.focus();
                pe.gotoLine(pe.getSession().getDocument().getLength());
                pe.navigateLineEnd();
                var newCurPos = pe.getCursorPosition();
                pe.insert('\n'+ text);
                pe.navigateTo(newCurPos.row+1, 0);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("left");
            }
        }
    })
    editor.commands.addCommand({
        name: "mergeAfter",
        bindKey: {win: "Delete", mac: "Delete|Ctrl-D|Shift-Delete"},
        exec: function(editor) {
            var eodRow = editor.getSession().getDocument().getLength()-1;
            var eodCol = editor.session.getLine(eodRow).length;
            var curPos = editor.getCursorPosition();
            if(curPos.row == eodRow && curPos.column == eodCol) {
              ne=nextEditor(doc,id);
              if(typeof(ne)!='undefined') {
                console.log("merge with after!");
                var text = editor.getSession().getDocument().getValue();
                ne.focus();
                ne.navigateTo(0, 0);
                ne.insert(text+'\n', 1);
                document.getElementById('remove' + id).click();
              }
            } else {
              editor.remove("right");
            }
        }
    })
    editor.commands.addCommand({
        name: "saveDoc",
        bindKey: {win: "Ctrl-S", mac: "Cmd-S"},
        exec: function(editor) {
            saveDoc(doc, compilers);
        }
    })
    editor.commands.addCommand({
        name: "modeScala",
        bindKey: {win: "Ctrl-Alt-S", mac: "Ctrl-Alt-S"},
        exec: function(editor) {
            console.log("changing mode to scala");
            changeMode(id,'scala');
        }
    })
    editor.commands.addCommand({
        name: "modeMarkdown",
        bindKey: {win: "Ctrl-Alt-M", mac: "Ctrl-Alt-M"},
        exec: function(editor) {
            console.log("changing mode to markdown");
            changeMode(id,'markdown');
        }
    })
    editor.commands.addCommand({
        name: "toggleMode",
        bindKey: {win: "Ctrl-M", mac: "Ctrl-M"},
        exec: function(editor) {
            mode = currentMode(id);
            console.log("changing mode to " + toggledMode(mode));
            changeMode(id, toggledMode(mode));
        }
    })
    //heightUpdateFunction(editor, '#editor'+id);
    return editor;
}
    ;
        compilers.google_viewer.editorToInput = 
function (doc, id) {
  input = {}
  input.code = doc.cells[id].editor.getSession().getValue();
  return input;
};
    ;
        compilers.google_viewer.aggregate = false;
    

    /* DOCUMENT OBJECT */
    var doc = newDoc("Tokenization");
    doc.aceTheme = 'chaos';
    doc.allowExecution = false;

    /* add cells */
    
        var mode = 'markdown';
        if(mode == 'wolfe') mode = 'scala';
        var input = {"sessionId":null,"code":"<div class=\"newslide\"></div>\nBefore a program can process natural language, we need identify the _words_ that constitute a string of characters. This is important because the meaning of text generally depends on the relations of words in that text. <span class=\"summary\">We need to identify which units constitutes the **words** of a sentence.</span>\n\nBy default text on a computer is represented through `String` values. These values store a sequence of characters (nowadays mostly in [UTF-8](http://en.wikipedia.org/wiki/UTF-8) format). The first step of an NLP pipeline is therefore to split the text into smaller units corresponding to the words of the language we are considering. In the context of NLP we often refer to these units as _tokens_, and the process of extracting these units is called _tokenization_. Tokenization is considered boring by most, but it's hard to overemphasize its importance, seeing as it's the first step in a long pipeline of NLP processors, and if you get this step wrong, all further steps will suffer. <span class=\"summary\"></span>\n\n<div class=\"newslide\"></div>\nIn Scala (and Java) a simple way to tokenize a text is via the `split` method that divides a text wherever a particular pattern matches. In the code below this pattern is simply the whitespace character, and this seems like a reasonable starting point for an English tokenization approach.<span class=\"summary\">In Scala we can use `string.split`:</span> ","extraFields":{}};
        var id = 0;
        //createStaticCellHTML(id, divCells, doc, mode, input, compilers);
    
        var mode = 'scala';
        if(mode == 'wolfe') mode = 'scala';
        var input = {"sessionId":null,"code":"val text = \"Mr. Bob Dobolina is thinkin' of a master plan. Why doesn't he quit?\"\ntext.split(\" \").toSeq","extraFields":{"aggregatedCells":"[]"}};
        var id = 1;
        //createStaticCellHTML(id, divCells, doc, mode, input, compilers);
    
        var mode = 'markdown';
        if(mode == 'wolfe') mode = 'scala';
        var input = {"sessionId":null,"code":"<div class=\"newslide\"></div>\nThere are clearly shortcomings in this tokenization. However, before we address these we will switch to using the Wolfe [document data structures](http://localhost:9000/assets/wolfe/wolfe-nlp/target/scala-2.11/api/index.html#ml.wolfe.nlp.Document). These simplify downstream processing, and also enable tailor-made rendering that will come in handy.<span class=\"summary\">This isn't quite optimal. Before we fix it we move to Wolfe [document data structures](http://localhost:9000/assets/wolfe/wolfe-nlp/target/scala-2.11/api/index.html#ml.wolfe.nlp.Document).</span>\n\nNotice that in wolfe any document is always in a tokenized state, but it may be based on a very coarse grained tokenization where the whole document is one single token. Tokenization in this setting amounts to refining a given tokenization.<span class=\"summary\"></span>\n\n<div class=\"newslide\"></div>\nBelow `Document.fromString` creates a document where a single token spans the complete source string.\n","extraFields":{}};
        var id = 2;
        //createStaticCellHTML(id, divCells, doc, mode, input, compilers);
    
        var mode = 'scala';
        if(mode == 'wolfe') mode = 'scala';
        var input = {"sessionId":null,"code":"val doc = Document.fromString(text)\nrenderTokens(doc)","extraFields":{"aggregatedCells":"[\"val text = \\\"Mr. Bob Dobolina is thinkin' of a master plan. Why doesn't he quit?\\\"\\ntext.split(\\\" \\\").toSeq\"]"}};
        var id = 3;
        //createStaticCellHTML(id, divCells, doc, mode, input, compilers);
    
        var mode = 'markdown';
        if(mode == 'wolfe') mode = 'scala';
        var input = {"sessionId":null,"code":"<div class=\"newslide\"></div>\n### Tokenization with Regular Expressions\nWolfe allows users to construct tokenizers using [regular expressions](http://en.wikipedia.org/wiki/Regular_expression) that define the character sequence patterns at which to split tokens. In general regular expressions are a powerful tool NLP practitioners can use when working with text, and they come in handy when you work with command line tools such as [grep](http://en.wikipedia.org/wiki/Grep). In the code below we use a simple pattern `\\\\s` that matches any whitespace. <span class=\"summary\">We can use regular expressions to define where to split tokens.</span>","extraFields":{}};
        var id = 4;
        //createStaticCellHTML(id, divCells, doc, mode, input, compilers);
    
        var mode = 'scala';
        if(mode == 'wolfe') mode = 'scala';
        var input = {"sessionId":null,"code":"val tokenizer = Tokenizer.fromRegEx(\"\\\\s\")\nval tokenized = tokenizer(doc)\nrenderTokens(tokenized)","extraFields":{"aggregatedCells":"[\"val text = \\\"Mr. Bob Dobolina is thinkin' of a master plan. Why doesn't he quit?\\\"\\ntext.split(\\\" \\\").toSeq\",\"val doc = Document.fromString(text)\\nrenderTokens(doc)\"]"}};
        var id = 5;
        //createStaticCellHTML(id, divCells, doc, mode, input, compilers);
    
        var mode = 'markdown';
        if(mode == 'wolfe') mode = 'scala';
        var input = {"sessionId":null,"code":"<div class=\"newslide\"></div>\nOne shortcoming of this tokenization is its treatment of punctuation because it considers \"plan.\" as a token whereas ideally we would prefer \"plan\" and \".\" to be distinct tokens (why?). To achieve this we need to use [lookahead](http://www.regular-expressions.info/lookaround.html) patterns that split at zero-length patterns before and after punctuation. Note how we used Scala [String Interpolation](http://docs.scala-lang.org/overviews/core/string-interpolation.html) to inject smaller patterns into larger ones. <span class=\"summary\">Use **lookahead** to split at zero-length tokens.</span>          ","extraFields":{}};
        var id = 6;
        //createStaticCellHTML(id, divCells, doc, mode, input, compilers);
    
        var mode = 'scala';
        if(mode == 'wolfe') mode = 'scala';
        var input = {"sessionId":null,"code":"val punct = \"[\\\\.\\\\?]\"\nval beforePunct = s\"(?=$punct)\"\nval afterPunct = s\"(?<=$punct)(?!\\\\s)\" //but not if whitespace follows\nval tokenizer = Tokenizer.fromRegEx(s\"(\\\\s|$beforePunct|$afterPunct)\")\nval tokenized = tokenizer(doc)\nrenderTokens(tokenized)","extraFields":{"aggregatedCells":"[\"val text = \\\"Mr. Bob Dobolina is thinkin' of a master plan. Why doesn't he quit?\\\"\\ntext.split(\\\" \\\").toSeq\",\"val doc = Document.fromString(text)\\nrenderTokens(doc)\",\"val tokenizer = Tokenizer.fromRegEx(\\\"\\\\\\\\s\\\")\\nval tokenized = tokenizer(doc)\\nrenderTokens(tokenized)\"]"}};
        var id = 7;
        //createStaticCellHTML(id, divCells, doc, mode, input, compilers);
    
        var mode = 'markdown';
        if(mode == 'wolfe') mode = 'scala';
        var input = {"sessionId":null,"code":"<div class=\"newslide\"></div>\nThis still isn't perfect. First, \"Mr.\" is split into two tokens, but it should be one. Second, and more subtly, many downstream linguistic processors (such as [syntactic parsers](todo)) prefer contractions such as \"doesn't\" to become two tokens, \"does\" and \"'t\" (Why?). <span class=\"summary\">This is still not perfect due to abbreviations such as \"Mr.\" and the representation of **contractions**.</span> \n\n<div class=\"exercise\">\n  <div class=\"exname\">Exercise</div>    \n  <div class=\"extext\">Improve the regular expressions to overcome the two problems above.</div>    \n</div>","extraFields":{}};
        var id = 8;
        //createStaticCellHTML(id, divCells, doc, mode, input, compilers);
    
        var mode = 'markdown';
        if(mode == 'wolfe') mode = 'scala';
        var input = {"sessionId":null,"code":"<div class=\"newslide\"></div>\n###Learning To Tokenize\nFor most English domains powerful and robust tokenizers can be built using the simple pattern matching approach shown above. However, in languages such as Japanese, words are not separated by whitespace, and this makes tokenization substantially more challenging. Even for certain English domains such as the domain of biomedical papers, tokenization is non-trivial.<span class=\"summary\">Tokenization is relatively easy for English, but not for other languages or domains.</span> \n\nWhen tokenization is more challenging and difficult to capture in a few rules a machine-learning based approach can be useful. In a nutshell, we can treat the tokenization problem as a character classification problem, or if needed, as a sequential labelling problem.<span class=\"summary\">We can **learn** to tokenize using sequence labelling models we discuss later.</span> ","extraFields":{}};
        var id = 9;
        //createStaticCellHTML(id, divCells, doc, mode, input, compilers);
    
        var mode = 'markdown';
        if(mode == 'wolfe') mode = 'scala';
        var input = {"sessionId":null,"code":"<div class=\"newslide\"></div>\n###Sentence Segmentation\nMany NLP tools work on a sentence-by-sentence basis. The next preprocessing step is hence to segment streams of tokens into sentences. In most cases this is straightforward after tokenization, because we only need to split sentences at sentence-ending punctuation tokens. In Wolfe you can implement segmentation using `Segmenter` that splits a sentence at a token whenever that token's content matches a regular expression. If this expression only fires for punctuations, you get the desired behaviour. <span class=\"summary\">Most NLP tools work on a **per-sentence basis**. To find sentence splits we can again use **regular expressions** .</span> ","extraFields":{}};
        var id = 10;
        //createStaticCellHTML(id, divCells, doc, mode, input, compilers);
    
        var mode = 'scala';
        if(mode == 'wolfe') mode = 'scala';
        var input = {"sessionId":null,"code":"val segmenter = Segmenter.fromRegEx(\"^\\\\.$\")\nval segmented = segmenter(tokenized)\nrenderTokens(segmented)","extraFields":{"aggregatedCells":"[\"val text = \\\"Mr. Bob Dobolina is thinkin' of a master plan. Why doesn't he quit?\\\"\\ntext.split(\\\" \\\").toSeq\",\"val doc = Document.fromString(text)\\nrenderTokens(doc)\",\"val tokenizer = Tokenizer.fromRegEx(\\\"\\\\\\\\s\\\")\\nval tokenized = tokenizer(doc)\\nrenderTokens(tokenized)\",\"val punct = \\\"[\\\\\\\\.\\\\\\\\?]\\\"\\nval beforePunct = s\\\"(?=$punct)\\\"\\nval afterPunct = s\\\"(?<=$punct)(?!\\\\\\\\s)\\\" //but not if whitespace follows\\nval tokenizer = Tokenizer.fromRegEx(s\\\"(\\\\\\\\s|$beforePunct|$afterPunct)\\\")\\nval tokenized = tokenizer(doc)\\nrenderTokens(tokenized)\"]"}};
        var id = 11;
        //createStaticCellHTML(id, divCells, doc, mode, input, compilers);
    
        var mode = 'markdown';
        if(mode == 'wolfe') mode = 'scala';
        var input = {"sessionId":null,"code":"<div class=\"newslide\"></div>\nThis is in fact a bad segmentation, as we split at the period of \"Mr.\". However, once you fix tokenization to treat \"Mr.\" as single token, the problem disappears. The default Wolfe tokenizer and segmenter overcome this problem. Below we use these to construct a _pipeline_ of document processors using [Scala function composition](https://twitter.github.io/scala_school/pattern-matching-and-functional-composition.html) via `andThen`. <span class=\"summary\">This is still bad, but we can the default tokenizer and segmenter to fix this.</span>       ","extraFields":{}};
        var id = 12;
        //createStaticCellHTML(id, divCells, doc, mode, input, compilers);
    
        var mode = 'scala';
        if(mode == 'wolfe') mode = 'scala';
        var input = {"sessionId":null,"code":"val pipeline = Tokenizer.default andThen Segmenter.default\nrenderTokens(pipeline(doc))","extraFields":{"aggregatedCells":"[\"val text = \\\"Mr. Bob Dobolina is thinkin' of a master plan. Why doesn't he quit?\\\"\\ntext.split(\\\" \\\").toSeq\",\"val doc = Document.fromString(text)\\nrenderTokens(doc)\",\"val tokenizer = Tokenizer.fromRegEx(\\\"\\\\\\\\s\\\")\\nval tokenized = tokenizer(doc)\\nrenderTokens(tokenized)\",\"val punct = \\\"[\\\\\\\\.\\\\\\\\?]\\\"\\nval beforePunct = s\\\"(?=$punct)\\\"\\nval afterPunct = s\\\"(?<=$punct)(?!\\\\\\\\s)\\\" //but not if whitespace follows\\nval tokenizer = Tokenizer.fromRegEx(s\\\"(\\\\\\\\s|$beforePunct|$afterPunct)\\\")\\nval tokenized = tokenizer(doc)\\nrenderTokens(tokenized)\",\"val segmenter = Segmenter.fromRegEx(\\\"^\\\\\\\\.$\\\")\\nval segmented = segmenter(tokenized)\\nrenderTokens(segmented)\"]"}};
        var id = 13;
        //createStaticCellHTML(id, divCells, doc, mode, input, compilers);
    
        var mode = 'markdown';
        if(mode == 'wolfe') mode = 'scala';
        var input = {"sessionId":null,"code":"<div class=\"newslide\"></div>\n#### Exercise\nCreate a regular expression tokenizer and sentence segmenter that can process Hip-Hop lyrics from [OHHLA](todo). Use the `Corpora.ohhla` document collection and split sentences per line. \n\n<div class=\"newslide\"></div>\n### Background Reading\n\n* Jurafsky & Martin, Speech and Language Processing: Chapter 2, Regular Expressions and Automata.\n* Manning, Raghavan & Schuetze, Introduction to Information Retrieval: [Tokenization](http://nlp.stanford.edu/IR-book/html/htmledition/tokenization-1.html)\n","extraFields":{}};
        var id = 14;
        //createStaticCellHTML(id, divCells, doc, mode, input, compilers);
    
    compileAll(doc,compilers);
    enableAceScalaCompletion();
</script>

            </div>
        </section>
        <script src="../assets/javascripts/scrollReveal.min.js" type="text/javascript"></script>
        <script>

      var bratSVGScale = 1.8;

      window.setTimeout(function() {
        //get all cell wrappers and add data-sr fields
        /*
        $(".cellWrapper").each(function (){
          $(this).attr('data-sr','')
        });
        $(".srdiv").each(function() {
            $(this).replaceWith($('<div data-sr>' + this.innerHTML + '</div>'));
        });
        */
        //increase the size of brat examples
//        $(".bratsvg").each(function() {scaleSVG($(this),2)});

        //in paragraphs with summary elements, remove everything else
        $("p").has('.summary').contents().filter(function(){return(this.nodeType === 3)}).remove();
        $("p").has('.summary').children().not('.summary').remove();
        $('.book-start').nextUntil('.slide-start').andSelf().remove();


        //create divs at the start of each slide
        $(".newslide").after("<div class='slideStart'></div>");
        var anchors = $(".slideStart")

        //add anchors for slides
        var i = 0;
        anchors.each(function(){ $(this).attr("id","slide" + i); i++; });

        //function to return the closest slideStart element to current scrollTop
        function closestSlideStartIndex() {
          var top = $(document).scrollTop() ;
          //if top is before first slide return -1
          //console.log(top);
          //console.log(window.scrollY);
          //console.log("===");
          //console.log($(anchors[0]).offset().top);
          //console.log(anchors[0].offsetTop);
          if ($(anchors[0]).offset().top - 2> top) return -1;
          for (var i = 0; i < anchors.length; i++) {
            var current = $(anchors[i]).offset().top;
            //console.log("---");
            //console.log(current);
            //console.log(anchors[i].offsetTop);
            if (current >= top) return i;
          }
          return anchors.length-1;
        }

        //scroll to slides
        $(document).keydown(function(e){
            if (e.keyCode == 39) {
                var index = closestSlideStartIndex()
                console.log(index);
                if (index + 1 < anchors.length) {
                    var top = $(anchors[index + 1]).offset().top;
                    $("html, body").animate({scrollTop: top }, 500);
                }
            }
            if (e.keyCode == 37) {
                var index = closestSlideStartIndex()
                console.log(index);
                if (index > 0) {
                    var top = $(anchors[index - 1]).offset().top;
                    $("html, body").animate({scrollTop: top}, 500);
                } else $("html, body").animate({scrollTop: 0}, 500);
            }
        });

        /*
        var config = {
          enter:  'top',
          move:   '0px',
          flip:   '0deg',
          spin:   '0deg',
          roll:   '0deg',
          reset:  true,
          vFactor:  0.01,
          //viewport: document.getElementById('viewport')
        }

        window.sr = new scrollReveal(config);
        */
        console.log("Test");
      }, 5000);

    </script>
    

<div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-family: STIXSizeOneSym, sans-serif;"></div></div></body><script type="text/javascript" src="../assets/javascripts/brat/client/lib/jquery.min.js"></script><script type="text/javascript" src="../assets/javascripts/brat/client/lib/jquery.svg.min.js"></script><script type="text/javascript" src="../assets/javascripts/brat/client/lib/jquery.svgdom.min.js"></script><script type="text/javascript" src="../assets/javascripts/brat/client/src/configuration.js"></script><script type="text/javascript" src="../assets/javascripts/brat/client/src/util.js"></script><script type="text/javascript" src="../assets/javascripts/brat/client/src/annotation_log.js"></script><script type="text/javascript" src="../assets/javascripts/brat/client/lib/webfont.js"></script><script type="text/javascript" src="../assets/javascripts/brat/client/src/dispatcher.js"></script><script type="text/javascript" src="../assets/javascripts/brat/client/src/url_monitor.js"></script><script type="text/javascript" src="../assets/javascripts/brat/client/src/visualizer.js"></script></html>